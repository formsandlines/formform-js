!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("d3")):"function"==typeof define&&define.amd?define(["d3"],e):"object"==typeof exports?exports.formform=e(require("d3")):t.formform=e(t.d3)}(window,function(t){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=6)}([function(e,r){e.exports=t},function(t,e,r){var n=r(2);"string"==typeof n&&(n=[[t.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};r(4)(n,i);n.locals&&(t.exports=n.locals)},function(t,e,r){(t.exports=r(3)(!1)).push([t.i,"",""])},function(t,e,r){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var r=function(t,e){var r=t[1]||"",n=t[3];if(!n)return r;if(e&&"function"==typeof btoa){var i=(a=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),o=n.sources.map(function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"});return[r].concat(o).concat([i]).join("\n")}var a;return[r].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+r+"}":r}).join("")},e.i=function(t,r){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},i=0;i<this.length;i++){var o=this[i][0];null!=o&&(n[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];null!=a[0]&&n[a[0]]||(r&&!a[2]?a[2]=r:r&&(a[2]="("+a[2]+") and ("+r+")"),e.push(a))}},e}},function(t,e,r){var n,i,o={},a=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=n.apply(this,arguments)),i}),l=function(t){var e={};return function(t,r){if("function"==typeof t)return t();if(void 0===e[t]){var n=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,r);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),s=null,c=0,u=[],f=r(5);function p(t,e){for(var r=0;r<t.length;r++){var n=t[r],i=o[n.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](n.parts[a]);for(;a<n.parts.length;a++)i.parts.push(m(n.parts[a],e))}else{var l=[];for(a=0;a<n.parts.length;a++)l.push(m(n.parts[a],e));o[n.id]={id:n.id,refs:1,parts:l}}}}function h(t,e){for(var r=[],n={},i=0;i<t.length;i++){var o=t[i],a=e.base?o[0]+e.base:o[0],l={css:o[1],media:o[2],sourceMap:o[3]};n[a]?n[a].parts.push(l):r.push(n[a]={id:a,parts:[l]})}return r}function d(t,e){var r=l(t.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=u[u.length-1];if("top"===t.insertAt)n?n.nextSibling?r.insertBefore(e,n.nextSibling):r.appendChild(e):r.insertBefore(e,r.firstChild),u.push(e);else if("bottom"===t.insertAt)r.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=l(t.insertAt.before,r);r.insertBefore(e,i)}}function y(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=u.indexOf(t);e>=0&&u.splice(e,1)}function v(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var n=function(){0;return r.nc}();n&&(t.attrs.nonce=n)}return g(e,t.attrs),d(t,e),e}function g(t,e){Object.keys(e).forEach(function(r){t.setAttribute(r,e[r])})}function m(t,e){var r,n,i,o;if(e.transform&&t.css){if(!(o="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=o}if(e.singleton){var a=c++;r=s||(s=v(e)),n=w.bind(null,r,a,!1),i=w.bind(null,r,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",g(e,t.attrs),d(t,e),e}(e),n=function(t,e,r){var n=r.css,i=r.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(n=f(n));i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([n],{type:"text/css"}),l=t.href;t.href=URL.createObjectURL(a),l&&URL.revokeObjectURL(l)}.bind(null,r,e),i=function(){y(r),r.href&&URL.revokeObjectURL(r.href)}):(r=v(e),n=function(t,e){var r=e.css,n=e.media;n&&t.setAttribute("media",n);if(t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}.bind(null,r),i=function(){y(r)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var r=h(t,e);return p(r,e),function(t){for(var n=[],i=0;i<r.length;i++){var a=r[i];(l=o[a.id]).refs--,n.push(l)}t&&p(h(t,e),e);for(i=0;i<n.length;i++){var l;if(0===(l=n[i]).refs){for(var s=0;s<l.parts.length;s++)l.parts[s]();delete o[l.id]}}}};var b,k=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function w(t,e,r,n){var i=r?"":n.css;if(t.styleSheet)t.styleSheet.cssText=k(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var r=e.protocol+"//"+e.host,n=r+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i,o=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?t:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?r+o:n+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}r.r(e);var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,i;return e=t,i=[{key:"rel_logic",value:function(t,e){return t>3||t<0||e>3||e<0?-98:0===t||1===e?e:0===e||1===t?t:t===e?t:2===t&&3===e||3===t&&2===e?1:-99}},{key:"rel",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e.length>1){var n=0;for(var i in e)n=this.rel_logic(n,e[i]);return n}return-97}},{key:"inv_logic",value:function(t){switch(t){case 0:return 1;case 1:return 0;case 2:return 3;case 3:return 2}return-99}},{key:"inv",value:function(t,e){if(e>0){for(var r=t,n=0;n<e;n++)r=this.inv_logic(r);return r}return this.inv_logic(t)}},{key:"uForm2",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.reEntry(!1,!1,r,t,e)}},{key:"iForm2",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.reEntry(!1,!0,r,t,e)}},{key:"uForm3",value:function(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return this.reEntry(!0,t,i,e,r,n)}},{key:"iForm3",value:function(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return this.reEntry(!1,t,i,e,r,n)}},{key:"uForm4",value:function(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return this.reEntry(!1,!1,i,t,e,r,n)}},{key:"iForm4",value:function(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return this.reEntry(!1,!0,i,t,e,r,n)}},{key:"uForm5",value:function(t,e,r,n,i,o){var a=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return this.reEntry(!0,t,a,e,r,n,i,o)}},{key:"iForm5",value:function(t,e,r,n,i,o){var a=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return this.reEntry(!1,t,a,e,r,n,i,o)}},{key:"reEntry",value:function(t,e,r){void 0===t&&(t=!1),void 0===e&&(e=!1);var n=(arguments.length<=3?0:arguments.length-3)%2==0,i=0,o=-1,a=!1;n?e&&(a=!0):t||(a=!0);for(var l=-1,s=0;s<(arguments.length<=3?0:arguments.length-3);s++){if(1==(y=s+3<3||arguments.length<=s+3?void 0:arguments[s+3])){l=s;break}if(0==y)i++;else if(2==y||3==y)if(-1==o)o=s;else if(y!=(o+3<3||arguments.length<=o+3?void 0:arguments[o+3])){l=o;break}}if(i==(arguments.length<=3?0:arguments.length-3))return a?3:2;if(l>=0){var c=1;for(s=l;s<(arguments.length<=3?0:arguments.length-3);s++)c=e&&s==(arguments.length<=3?0:arguments.length-3)-1?this.rel(c,s+3<3||arguments.length<=s+3?void 0:arguments[s+3]):this.inv(this.rel(c,s+3<3||arguments.length<=s+3?void 0:arguments[s+3]));return c}var u=!t||n||e?1:2;for(s=(arguments.length<=3?0:arguments.length-3)*u-1;s>=0;s--){var f=s%(arguments.length<=3?0:arguments.length-3);if(2==(f+3<3||arguments.length<=f+3?void 0:arguments[f+3])||3==(f+3<3||arguments.length<=f+3?void 0:arguments[f+3])){var p=(arguments.length<=3?0:arguments.length-3)*u-1-s;if(r&&(e&&p%2==0||!e&&p%2==1))return a?this.rel(3,f+3<3||arguments.length<=f+3?void 0:arguments[f+3]):this.rel(2,f+3<3||arguments.length<=f+3?void 0:arguments[f+3]);var h=2;!e||n||t||(h=this.inv(h));for(var d=0;d<(arguments.length<=3?0:arguments.length-3)*u;d++){var y=0;d==s&&(y=2==(f+3<3||arguments.length<=f+3?void 0:arguments[f+3])?0:this.inv(0)),h=e&&d==(arguments.length<=3?0:arguments.length-3)-1?this.rel(h,y):this.inv(this.rel(h,y))}var v=2;!e||n||t||(v=this.inv(v));for(d=0;d<(arguments.length<=3?0:arguments.length-3)*u;d++){y=0;d==s&&(y=2==(f+3<3||arguments.length<=f+3?void 0:arguments[f+3])?1:this.inv(1)),v=e&&d==(arguments.length<=3?0:arguments.length-3)-1?this.rel(v,y):this.inv(this.rel(v,y))}return this.cont(h,v)}}return-99}},{key:"implL",value:function(t,e){return this.rel(this.inv(t),e)}},{key:"implR",value:function(t,e){return this.rel(t,this.inv(e))}},{key:"pre",value:function(t,e){return this.inv(this.implL(t,e))}},{key:"post",value:function(t,e){return this.inv(this.implR(t,e))}},{key:"cont",value:function(t,e){return this.rel(this.pre(t,e),this.post(t,e))}},{key:"equiv",value:function(t,e){return this.inv(this.cont(t,e))}}],(r=null)&&n(e.prototype,r),i&&n(e,i),t}(),o=r(0);function a(t,e){for(var r=t+"";r.length<e;)r="0"+r;return r}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t,e,r){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}String.prototype.replaceAll=function(t,e,r){return r&&(t=t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")),this.replace(new RegExp(t,"g"),e)},String.prototype.addBefore=function(t,e){return this.substr(0,t)+e+this.substr(t)},String.prototype.replaceAt=function(t,e){return this.substr(0,t)+e+this.substr(t+e.length)};var h=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),c(void 0)}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(e,i),r=e,o=[{key:"calc",value:function(t){var e=0;for(var r in"string"==typeof t&&(t=this.parseLinear(t)),t.space)if("form"===t.space[r].type)e=this.rel(e,this.calc(t.space[r]));else if("const"===t.space[r].type)e=this.rel(e,t.space[r].value);else if("var"===t.space[r].type)isNaN(t.space[r].value)||(e=this.rel(e,t.space[r].value));else if("unclear"===t.space[r].type)e=this.rel(e,t.space[r].value);else if("reEntry"===t.space[r].type){var n=[],i=t.space[r];for(var o in i.nested)n.push(this.calc(i.nested[o]));e=this.rel(e,this.reEntry.apply(this,[i.reEven,i.lastOpen,i.altInterpretation].concat(n)))}return t.unmarked?e:this.inv(e)}},{key:"calcAll",value:function(t){"string"==typeof t&&(t=this.parseLinear(t));var e=this.getVariables(t),r={},n=e.join()+";";switch(e.length){case 0:r.Result=this.calc(t);break;case 1:for(var i=[{var:e[0],value:null}],o=0;o<4;o++)i[0].value=o,r[n+o]=this.interCalc(t,i);break;case 2:for(i=[{var:e[0],value:null},{var:e[1],value:null}],o=0;o<4;o++){i[0].value=o;for(var a=0;a<4;a++)i[1].value=a,r[n+o+""+a]=this.interCalc(t,i)}break;case 3:for(i=[{var:e[0],value:null},{var:e[1],value:null},{var:e[2],value:null}],o=0;o<4;o++){i[0].value=o;for(a=0;a<4;a++){i[1].value=a;for(var l=0;l<4;l++)i[2].value=l,r[n+o+""+a+l]=this.interCalc(t,i)}}break;case 4:for(i=[{var:e[0],value:null},{var:e[1],value:null},{var:e[2],value:null},{var:e[3],value:null}],o=0;o<4;o++){i[0].value=o;for(a=0;a<4;a++){i[1].value=a;for(l=0;l<4;l++){i[2].value=l;for(var s=0;s<4;s++)i[3].value=s,r[n+o+""+a+l+s]=this.interCalc(t,i)}}}break;case 5:for(i=[{var:e[0],value:null},{var:e[1],value:null},{var:e[2],value:null},{var:e[3],value:null},{var:e[4],value:null}],o=0;o<4;o++){i[0].value=o;for(a=0;a<4;a++){i[1].value=a;for(l=0;l<4;l++){i[2].value=l;for(s=0;s<4;s++){i[3].value=s;for(var c=0;c<4;c++)i[4].value=c,r[n+o+""+a+l+s+c]=this.interCalc(t,i)}}}}break;case 6:for(i=[{var:e[0],value:null},{var:e[1],value:null},{var:e[2],value:null},{var:e[3],value:null},{var:e[4],value:null},{var:e[5],value:null}],o=0;o<4;o++){i[0].value=o;for(a=0;a<4;a++){i[1].value=a;for(l=0;l<4;l++){i[2].value=l;for(s=0;s<4;s++){i[3].value=s;for(c=0;c<4;c++){i[4].value=c;for(var u=0;u<4;u++)i[5].value=u,r[n+o+""+a+l+s+c+u]=this.interCalc(t,i)}}}}}}return r}},{key:"interCalc",value:function(t,e){return this.calc(this.interpret(t,e))}},{key:"interpret",value:function(t,e){"string"==typeof t&&(t=this.parseLinear(t));var r=JSON.parse(JSON.stringify(t));return this.traverseForm(r,function(t){var r=t.space;for(var n in r)if("var"===r[n].type)for(var i in e)if(r[n].symbol===e[i].var){r[n].value=e[i].value;break}}),r}},{key:"rel_logic",value:function(t,r){return l(t)===Array||l(r)===Array?null:u(f(e),"rel_logic",this).call(this,t,r)}},{key:"rel",value:function(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=u(f(e),"rel",this)).call.apply(t,[this].concat(n))}},{key:"inv_logic",value:function(t){return l(t)===Array?null:u(f(e),"inv_logic",this).call(this,t)}},{key:"inv",value:function(t,r){return u(f(e),"inv",this).call(this,t,r)}},{key:"parseLinear",value:function(t){var e=this.convFromLinear(t),r=null;try{r=JSON.parse(e)}catch(t){console.log(t)}return r}},{key:"convFromLinear",value:function(t){var e=this.cleanLinear(t);return function t(e){return e.reduce(function(e,r){return e.concat(Array.isArray(r)?t(r):r)},[])}(this.constructFromLinear(e)).join("")}},{key:"cleanLinear",value:function(t){var e="",r=!1,n=!1;for(var i in t){var o=t[i];if("string"!=typeof o)break;'"'!==o||n||(r=!r),"/"!==o||r||(n=!n)," "===o?(r||n)&&(e+=o):e+=o}return e}},{key:"constructFromLinear",value:function(t){var e=[],r=!0,n=0,i=!1,o=!1;for(var a in t){if("string"!=typeof(s=t[a]))break;if(!i&&!o)if("("===s){if(0==n&&0!=a)break;n++}else if(")"===s&&0==--n){if(a==t.length-1){r=!1;break}break}'"'!==s||o||(i=!i),"/"!==s||i||(o=!o)}e.push("  {"),e.push('"type":"form",'),r?e.push('"unmarked":true,'):t=t.slice(1,t.length-1),e.push('"space":[');var l=[];l.push("");n=0,i=!1,o=!1;for(var a in t){var s=t[a],c=t[a-1];if("string"!=typeof s)break;i||o||(")"!==s&&"}"!==s||n--,"("===s||"{"===s?(0===n&&a>0&&l.push(""),n++):")"!==c&&"}"!==c||")"===s||"}"===s||0===n&&l.push(""),1===n&&","===s?s="⤵":1===n&&"|"===s&&(s="⤴")),'"'!==s||o||(i=!i),"/"!==s||i||(o=!o),l[l.length-1]+=s}for(var a in l){if("("===l[a][0])(h=[]).push(this.constructFromLinear(l[a])),l[a]=h.slice();else if("{"===l[a][0]){(h=[]).push("  {"),h.push('"type":"reEntry",');var u=l[a].slice(1,l[a].length-1).split("⤴");"2r"===u[0]||"2r"===u[1]||"2r"===u[2]?h.push('"reEven":true,'):h.push('"reEven":false,'),"open"===u[0]||"open"===u[1]||"open"===u[2]?h.push('"lastOpen":true,'):h.push('"lastOpen":false,'),"alt"===u[0]||"alt"===u[1]||"alt"===u[2]?h.push('"altInterpretation":true,'):h.push('"altInterpretation":false,');var f=u[u.length-1].split("⤵");for(var p in h.push('"nested":['),f)h.push(this.constructFromLinear(f[p])),p<f.length-1&&h.push(",");h.push("]}  "),l[a]=h.slice()}else{var h=[],d=[];i=!1,o=!1;for(var y in l[a]){if("string"!=typeof(s=l[a][y]))break;'"'!==s||o?"/"!==s||i?(i||o||d.push(""),d[d.length-1]+='"'===s&&o?"\\"+s:s):(o=!o)&&d.push("‽"):(i=!i)&&d.push("‖")}for(var v in d){if("string"!=typeof d[v])break;h.push("  {"),!isNaN(d[v])&&d[v].length>0&&"‽"!==d[v][0]&&"‖"!==d[v][0]?(h.push('"type":"const",'),h.push('"value":'),h.push(d[v])):"‽"===d[v][0]?(h.push('"type":"unclear",'),h.push('"value":2,'),h.push('"symbol":'),h.push('"'+d[v].slice(1)+'"')):(h.push('"type":"var",'),h.push('"value":"*",'),h.push('"symbol":'),"‖"===d[v][0]?h.push('"'+d[v].slice(1)+'"'):h.push('"'+d[v]+'"')),h.push("}  "),v<d.length-1&&h.push(",")}l[a]=h.slice()}e.push(l[a]),a<l.length-1&&e.push(",")}return e.push("]}  "),e}},{key:"jsonString",value:function(t){return"string"==typeof t&&(t=this.parseLinear(t)),JSON.stringify(t,void 0,2)}},{key:"getVariables",value:function(t){"string"==typeof t&&(t=this.parseLinear(t));var e=[];return this.traverseForm(t,function(t){var r,n,i=t.space;for(var o in i)"var"===i[o].type&&(r=e,n=i[o].symbol,-1==r.indexOf(n)&&e.push(i[o].symbol))}),e.sort()}},{key:"traverseForm",value:function(t,e){var r=e.apply(this,[t]);if(t.space){if(t.space.length>0)for(var n in t.space){if("form"===t.space[n].type||"reEntry"===t.space[n].type)if(this.traverseForm(t.space[n],e))break}}else if(t.nested){if(t.nested.length>0)for(var n in t.nested){if(this.traverseForm(t.nested[n],e))break}}else console.log("ERROR: Not a form!");return r}}],(n=null)&&s(r.prototype,n),o&&s(r,o),e}(),d={width:window.innerWidth,height:window.innerHeight,margin:{left:10,right:10,top:10,bottom:10}};function y(t){var e=t.ancestors().filter(function(t){return"form"===t.data.type&&t.data.unmarked||"reEntry"===t.data.type&&t.data.lastOpen}).length;return t.depth-e}function v(t){return function(e){e.each(function(e){var r=t(e).split("_");2===r.length?(o.select(this).append("tspan").text(function(t){return r[0]}),o.select(this).append("tspan").text(function(t){return r[1]}).attr("dx",1).attr("dy",6).attr("font-size",".8em")):o.select(this).text(t(e))})}}function g(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"inherit",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"inherit",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"normal";if(o){var i=o.select("body").append("svg");i.append("text").style("font","".concat(n," ").concat(e," ").concat(r)).attr("x","-9999").attr("y","-9999").text(t);var a=i.node().getBBox();return i.remove(),{width:a.width,height:a.height}}}function m(t,e){var r=o.color(t);return r.opacity=e,r}function b(t,e,r){return function(t,e){for(var r=0,n=1,i=Math.round(e),o=i;t%i>.3&&(t%(o+=.001*n)<t%i&&(i=o),r>=5e3&&(o=Math.round(e),n=-1),!(r>=1e4));)r++;return i}(2*Math.PI*t,e)*r}function k(t,e,r){var n="";for(var i in r)n=n.concat("".concat(b(t,e,r[i]),"px "));return n}r(1);function w(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function S(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){x(t,e,r[e])})}return t}function x(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var O={common:{font:{family:"sans-serif",size:"14px"},fontContext:{family:"sans-serif",size:"9px"},color:{base:o.color("black"),ground:o.color("white"),indef:o.color("red"),light:o.color("#ddd")},dashes:{}}};O.basic=S({},O.common,{font:S({},O.common.font,{family:"georgia, serif"})}),O.gestalt=S({},O.common,{font:S({},O.common.font,{family:"sans-serif"}),color:S({},O.common.color,{pos:o.color("white"),neg:o.color("black")})});var E=[O.basic,O.gestalt],j=E[0],A=E[1];function C(t){t.attr("stroke","none").attr("fill","none")}var L={common:{nodeSize:{w:10,h:10},nodeSeparation:{hz:20,vt:40},dashes:{link:"4px 6px"}}};L.basic=S({},j,L.common),L.basic.applyAxisStyles=function(t){t.selectAll(".tick").select("line").style("stroke-width",1.5*this.nodeSize.w).style("stroke","#f4f4f4"),t.selectAll(".tick").select("text").attr("text-anchor","start")},L.basic.applyNodeStyles=function(t,e){var r=w(e,10),n=(r[0],r[1]),i=r[2],o=r[3],a=r[4],l=r[5],s=r[6];r[7],r[8],r[9];i.selectAll("circle").style("stroke",this.color.base.toString()).style("fill",this.color.ground.toString()),s.selectAll("circle").style("fill",this.color.base.toString()),o.selectAll("circle").style("stroke",this.color.indef.toString()).style("fill",this.color.indef.toString()).filter(function(t){return t.data.lastOpen}).style("fill",this.color.ground.toString()),a.selectAll("circle").style("stroke",this.color.indef.toString()).style("stroke-dasharray",function(t){return k(t.r,3,[1])}),l.selectAll("circle").style("fill",this.color.indef.toString()),t.selectAll("text").style("font","normal ".concat(this.font.size," ").concat(this.font.family)).style("dominant-baseline","middle").style("fill",this.color.base.toString()),n.selectAll("circle.inner").style("stroke","none").style("fill",this.color.base.toString())},L.basic.applyLinkStyles=function(t,e){var r=w(e,2),n=r[0],i=r[1];t.selectAll("path").style("stroke",this.color.base.toString()),n.selectAll("path").style("stroke",this.color.indef.toString()).style("stroke-dasharray",this.dashes.link),i.selectAll("path").style("stroke",this.color.indef.toString()).style("stroke-dasharray",this.dashes.link)},L.gestalt=S({},A,L.common),L.gestalt.applyAxisStyles=function(t){L.basic.applyAxisStyles(t)},L.gestalt.applyNodeStyles=function(t,e){var r=w(e,10);r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9];L.basic.applyNodeStyles(t,e)},L.gestalt.applyLinkStyles=function(t,e){L.basic.applyLinkStyles(t,e)};var P={common:{radius:14,padding:14}};function _(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function R(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function N(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function F(t,e){var r=e.filter(function(e){return t.leaves().filter(function(t){return t===e}).pop()}).classed("leaf",!0),n=e.filter(function(t){return"form"===t.data.type||"reEntry"===t.data.type}).classed("form",!0),i=n.filter(function(t){return"form"===t.data.type}).classed("form",!0),o=n.filter(function(t){return"reEntry"===t.data.type}).classed("reEntry",!0),a=e.filter(function(t){return!("form"===t.data.type||"reEntry"===t.data.type)}).classed("element",!0),l=a.filter(function(t){return"var"===t.data.type}).classed("var",!0),s=a.filter(function(t){return"const"===t.data.type}).classed("const",!0);s.unmarked=a.filter(function(t){return 0==t.data.value}).classed("unmarked",!0),s.marked=a.filter(function(t){return 1==t.data.value}).classed("marked",!0),s.indef=a.filter(function(t){return 2==t.data.value}).classed("indef",!0),s.imag=a.filter(function(t){return 3==t.data.value}).classed("imag",!0);var c=a.filter(function(t){return"unclear"===t.data.type}).classed("unclear",!0),u=i.filter(function(t){return t.data.reChild}).classed("reChild",!0);return[r,n,i,o,u,a.filter(function(t){return"reEntryPoint"===t.data.type}).classed("reEntryPoint",!0),a,l,s,c]}P.basic=S({},j,P.common),P.basic.applyNodeStyles=function(t,e){var r=w(e,10),n=(r[0],r[1],r[2]),i=r[3],o=(r[4],r[5]),a=r[6],l=(r[7],r[8],r[9]);n.select("circle").style("stroke",this.color.base.toString()).filter(function(t){return t.data.unmarked}).style("stroke","none"),i.select("circle").style("stroke",this.color.indef.toString()).filter(function(t){return t.data.lastOpen}).style("stroke-dasharray",function(t){return k(t.r,14,[.4,.6])}),a.selectAll("text").style("font","normal ".concat(this.font.size," ").concat(this.font.family)).style("dominant-baseline","middle").style("text-anchor","middle").style("fill",this.color.base.toString()),l.select("rect").style("fill",this.color.light.toString()),o.select("circle").style("fill",this.color.indef.toString()).style("stroke","none");i.select(".label").style("stroke","none").style("fill",this.color.indef.toString())},P.gestalt=S({},A,P.common),P.gestalt.invertFill=function(t){return y(t)%2?this.color.pos.toString():this.color.neg.toString()},P.gestalt.applyNodeStyles=function(t,e,r){var n=this,i=w(e,10),a=(i[0],i[1],i[2]),l=i[3],s=(i[4],i[5]),c=i[6],u=(i[7],i[8],i[9]),f=o.select(r.node().parentNode).append("defs"),p=f.append("radialGradient").attr("id","grad-indef-outin").attr("fx","20%");p.append("stop").attr("offset","40%").attr("stop-color",m(this.color.indef,.3).toString()),p.append("stop").attr("offset","90%").attr("stop-color",m(this.color.indef,.8).toString()),p.append("stop").attr("offset","100%").attr("stop-color",m(this.color.indef,1).toString());var h=f.append("radialGradient").attr("id","grad-indef-inout").attr("fx","20%");h.append("stop").attr("offset","10%").attr("stop-color",m(this.color.indef,1).toString()),h.append("stop").attr("offset","50%").attr("stop-color",m(this.color.indef,.6).toString()),h.append("stop").attr("offset","60%").attr("stop-color",m(this.color.indef,.4).toString()),h.append("stop").attr("offset","100%").attr("stop-color",m(this.color.indef,0).toString()),a.select("circle").filter(function(t){return!t.data.unmarked}).style("stroke","none").style("fill",function(t){return n.invertFill(t)}),l.select("circle").style("stroke",function(t){return"reEntry"===t.parent.data.type?n.color.pos.toString():"none"}).style("fill","url(#grad-indef-outin)");var d=l.select("circle").filter(function(t){return t.data.lastOpen}).style("fill","url(#grad-indef-inout)").style("stroke-dasharray",function(t){return k(t.r,8,[.4,.6])});d.filter(function(t){return"reEntry"!==t.parent.data.type||!y(t)%2}).style("stroke",function(t){return n.color.indef.toString()}),d.filter(function(t){return"reEntry"===t.parent.data.type&&!t.parent.data.lastOpen}).style("stroke",function(t){return n.color.pos.toString()}),c.selectAll("text").style("font","normal ".concat(this.font.size," ").concat(this.font.family)).style("dominant-baseline","middle").style("text-anchor","middle").style("stroke","none").style("fill",function(t){return n.invertFill(t)}),u.select("rect").style("fill",this.color.light.toString()),u.select("text").style("fill",this.color.base.toString()),s.select("circle").style("fill",this.color.indef.toString()).style("stroke","none").filter(function(t){return"reEntry"===t.parent.data.type}).style("stroke",this.color.indef.toString()).style("fill",this.color.pos.toString()).attr("transform","scale(1.5)");l.select(".label").style("stroke","none").style("fill",function(t){return"reEntry"!==t.parent.data.type||t.parent.data.lastOpen?n.color.indef.toString():n.color.pos.toString()});l.select(".label.inside").style("fill",function(t){return"reEntry"!==t.parent.data.type&&t.data.lastOpen?n.color.indef.toString():n.color.pos.toString()})};var I=function(){function t(e,r,n){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d,r=Object.assign({},e,t);return t.parentId?r.parent=o.select("#".concat(t.parentId)):o.select("body"),r.svg=r.parent.append("svg").lower().attr("id",r.id||"chart").attr("width",r.width-r.margin.right).attr("height",r.height-r.margin.bottom),t.styleClass&&r.svg.attr("class",t.styleClass),r.container=r.svg.append("g").attr("id","container").attr("transform","translate(".concat(r.margin.left,", ").concat(r.margin.top,")")),r}(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){R(t,e,r[e])})}return t}({},{margin:{left:50,right:50,top:50,bottom:50},padding:{left:10,right:10,top:10,bottom:10},styleClass:"basic"},n));Object.assign(this,a),this.innerHeight=this.height-this.margin.top-this.margin.bottom-this.padding.top-this.padding.bottom,this.innerWidth=this.width-this.margin.left-this.margin.right-this.padding.left-this.padding.right;for(var l=arguments.length,s=new Array(l>3?l-3:0),c=3;c<l;c++)s[c-3]=arguments[c];(i=this.constructor[e]).call.apply(i,[this,r].concat(s))}var e,r,n;return e=t,n=[{key:"tree",value:function(t){var e=this,r=this.container,n=o.hierarchy(t,function(t){return t.space}),i=L[this.styleClass],a=[i.nodeSize,i.nodeSeparation],l=a[0],s=a[1];i.font.size,i.font.family;n.dx=l.w+s.hz,n.dy=this.width/(n.height+1);var c=o.tree().nodeSize([n.dx,n.dy]).separation(function(t,e){return t.parent==e.parent?1:2}),u=c(n),f=1/0,p=-f;u.each(function(t){t.x>p&&(p=t.x),t.x<f&&(f=t.x)});var h=n.data.unmarked;this.height=p-f+2*this.padding.top+30,this.svg.attr("width",this.width).attr("height",this.height),C(this.svg),r.classed("graph-tree",!0).attr("transform","translate(".concat(this.padding.left+(n.data.unmarked?-n.dy:0),",").concat(this.padding.top-f,")"));var d=o.range(n.height+(h?0:1));this.depthScale=o.scaleOrdinal().domain(d).range(d.map(function(t){return(t+(h?1:0))*n.dy}));var y=o.axisBottom().scale(this.depthScale).tickSizeInner(-this.height).tickSizeOuter(0).tickPadding(8).tickValues(this.depthScale.domain().map(function(t){return e.depthScale.domain().length<15?"Depth "+t:t})),g=r.append("g").classed("depthAxis",!0).attr("transform","translate(0, ".concat(p+this.padding.bottom,")")).call(y);g.select(".domain").remove();var m=r.selectAll(".link").data(u.links()).enter().append("g").classed("link",!0),b=r.selectAll(".node").data(u.descendants()).enter().append("g").classed("node",!0).attr("transform",function(t){return"translate(".concat(t.y,",").concat(t.x,")")});h&&(m.filter(function(t){return 0===t.source.depth}).remove(),b.filter(function(t){return 0===t.depth}).remove());var k=function(t,e){return[e.filter(function(t){return t.target.data.reChild}).classed("reChildLink",!0),e.filter(function(t){return"reEntryPoint"===t.target.data.type}).classed("rePointLink",!0)]}(0,m),w=_(k,2),S=(w[0],w[1],F(u,b)),x=_(S,10),O=(x[0],x[1]),E=(x[2],x[3],x[4],x[5]),j=x[6],A=x[7],P=x[8],R=x[9];o.line().curve(o.curveBasis);m.append("path").attr("d",o.linkHorizontal().x(function(t){return t.y}).y(function(t){return t.x})),b.filter(function(t){return!t.data.unmarked}).append("circle").attr("r",l.w/2),E.append("text").attr("x",l.w/2+2).text(function(t){for(var e=t.parent,r=0;"reEntry"!==e.data.type;){if(e=e.parent,r>1e3)return null;r++}return e.data.reEven?"2|r|":"2|r|+1"}),j.selectAll("circle").attr("r",l.w/2/2),b.append("text").attr("x",l.w/2+2),A.selectAll("text").call(v(function(t){return t.data.symbol})),P.selectAll("text").text(function(t){return"= ".concat(t.data.value)}),R.selectAll("text").text(function(t){return"/".concat(t.data.symbol,"/")}),O.filter(function(t){return t.children}).append("circle").classed("inner",!0).attr("r",l.w/2/2),i.applyAxisStyles(g),i.applyLinkStyles(m,k),i.applyNodeStyles(b,S);var N=[n,c,r,u,i];this.root=N[0],this.layout=N[1],this.chart=N[2],this.tree=N[3],this.design=N[4]}},{key:"pack",value:function(t){var e=this.container;C(this.svg);var r=o.hierarchy(t,function(t){return t.space}).sum(function(t){return t.children?0:1}),n=P[this.styleClass],i=[n.radius,n.padding],a=i[0],l=i[1],s=[n.font.size,n.font.family],c=s[0],u=s[1],f=o.pack().padding(function(t){var e=l;return"form"===t.data.type&&1===t.children.length&&"form"===t.children[0].data.type&&(e*=.4),t.data.unmarked&&1===t.children.length&&(e=0),e}).radius(function(t){var e=a;return"string"==typeof t.data.symbol?(e=g(t.data.symbol,c,u).width/2,"unclear"===t.data.type&&(e+=2*l)):t.data.value?e=g(t.data.value+"",c,u).width/2:(t.data.children||"reEntryPoint"===t.data.type)&&(e=0),e}),p=f(r);e.attr("class","graph-pack").attr("transform","translate(".concat(p.r+this.padding.left,",").concat(p.r+this.padding.top,")"));var h=e.selectAll(".node").data(p.descendants()).enter().append("g").classed("node",!0).attr("transform",function(t){return"translate(".concat(t.x,",").concat(t.y,")")}),d=F(p,h),y=_(d,10),m=(y[0],y[1]),b=(y[2],y[3]),k=(y[4],y[5]),w=(y[6],y[7]),S=y[8],x=y[9];m.append("circle").attr("r",function(t){return t.r}),w.append("text").call(v(function(t){return t.data.symbol})),S.append("text").text(function(t){return t.data.value}),x.append("rect").attr("transform",function(t){return"skewX(-30) translate(".concat(-(t.r-l),",\n            ").concat(-(g("x",c,u).height+2*l)/2,")")}).attr("width",function(t){return 2*t.r-2*l}).attr("height",function(t){return g("x",c,u).height+2*l}),x.append("text").text(function(t){return t.data.symbol}),k.append("circle").attr("r",1.5),b.call(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"inherit",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"inherit";return function(n){n.each(function(n){var i=g(t(n),e,r);o.select(this).append("text").style("font","normal ".concat(e," ").concat(r)).style("text-anchor","middle").raise().text(function(e){return t(e)}),o.select(this).filter(function(t){return 2*t.r>=i.width+50}).select("text").classed("label inside",!0).attr("y",function(t){return t.r-.5*i.height}).attr("dominant-baseline","baseline"),o.select(this).filter(function(t){return 2*t.r<i.width+50}).select("text").classed("label outside",!0).attr("y",function(t){return t.r+4}).attr("dominant-baseline","hanging")})}}(function(t){return t.data.reEven?"2|r|":"2|r|+1"},n.fontContext.size,n.fontContext.family)),n.applyNodeStyles(h,d,e),function(t,e){o.select(t.node().parentElement).attr("width",t.node().getBBox().width+e.left+e.right).attr("height",t.node().getBBox().height+e.top+e.bottom)}(e,this.padding);var O=[r,f,e,p,n];this.root=O[0],this.layout=O[1],this.chart=O[2],this.pack=O[3],this.design=O[4]}},{key:"treemap",value:function(t){}},{key:"force",value:function(t){}}],(r=null)&&N(e.prototype,r),n&&N(e,n),t}(),U=function(t,e,r){r=r||o.select(e.parentNode).attr("id");var n,i=(""+(n=new Date).getUTCFullYear()).substr(2)+a(n.getUTCMonth()+1,2)+a(n.getUTCDate(),2)+"-"+a(n.getHours(),2)+a(n.getMinutes(),2)+a(n.getSeconds(),2);try{switch(t){case"svg":!function(t,e){t.setAttribute("xmlns","http://www.w3.org/2000/svg");var r=t.outerHTML,n=new Blob(['<?xml version="1.0" standalone="no"?>\r\n',r],{type:"image/svg+xml;charset=utf-8"}),i=URL.createObjectURL(n),o=document.createElement("a");o.href=i,o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o)}(e,i+"_"+r+".svg")}}catch(t){console.log(t)}};function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function B(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function z(t,e){return!e||"object"!==T(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function D(t,e,r){return(D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=J(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function J(t){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function H(t,e){return(H=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var q=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),z(void 0)}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&H(t,e)}(e,h),r=e,i=[{key:"jsonString",value:function(t){var r=this.expand_reEntry(t);return D(J(e),"jsonString",this).call(this,r)}},{key:"createGraph",value:function(t,e,r){var n=this.expand_reEntry(e),i=new I(t,n,r);return i.formula=e,i}},{key:"saveGraph",value:function(t,e,r){U(t,e,r)}},{key:"constructNested",value:function(t){var e=t.space=[];for(var r in t.nested.reverse(),t.nested)if(r>0){var n;e.unshift({type:"form",reChild:!0,space:[]});var i=e[0];t.nested[r].unmarked?(n=i.space).push.apply(n,M(t.nested[r].space)):i.space.push(t.nested[r]),e=i.space}else{var o;t.nested[r].unmarked?(o=e).push.apply(o,M(t.nested[r].space)):e.push(t.nested[r])}var a=t;if(t.space.length>0)for(;a.space[0].hasOwnProperty("reChild")&&!((a=a.space[0]).space.length<1););return t.lastOpen?(a.space.unshift({type:"form",reChild:!0,space:[]}),a.space[0].space.unshift({type:"reEntryPoint"})):a.space.unshift({type:"reEntryPoint"}),delete t.nested,t}},{key:"expand_reEntry",value:function(t){"string"!=typeof t&&(t=JSON.stringify(t));var e=this.parseLinear(t),r=this.parseLinear(t),n=0;return this.traverseForm(e,function(t){t.runningIndex=n,n++}),n=0,this.traverseForm(r,function(t){t.runningIndex=n,n++}),this.traverseForm(e,function(t){"reEntry"===t.type&&this.traverseForm(r,function(e){if(JSON.stringify(t)===JSON.stringify(e)&&t.runningIndex===(e.hasOwnProperty("runningIndex")?e.runningIndex:null))return e=this.constructNested(e),!0})}),this.traverseForm(r,function(t){delete t.runningIndex}),r}}],(n=null)&&B(r.prototype,n),i&&B(r,i),e}();e.default={calc:i,form:h,graph:q}}]).default});
//# sourceMappingURL=formform.min.js.map