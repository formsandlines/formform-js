{"version":3,"sources":["webpack://formform/webpack/universalModuleDefinition","webpack://formform/webpack/bootstrap","webpack://formform/external \"d3\"","webpack://formform/./src/lib/modules/d3-styles.scss?159a","webpack://formform/./src/lib/modules/d3-styles.scss","webpack://formform/./node_modules/css-loader/dist/runtime/api.js","webpack://formform/./node_modules/style-loader/lib/addStyles.js","webpack://formform/./node_modules/style-loader/lib/urls.js","webpack://formform/./src/lib/core/fcalc.js","webpack://formform/./src/common/helper.js","webpack://formform/./src/lib/core/fform.js","webpack://formform/./src/common/d3-helper.js","webpack://formform/./src/lib/modules/d3-styles.js","webpack://formform/./src/lib/modules/d3-graph.js","webpack://formform/./src/lib/core/fgraph.js","webpack://formform/./src/lib/main.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","content","options","hmr","transform","insertInto","undefined","locals","push","useSourceMap","list","toString","this","map","item","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","source","sourceRoot","concat","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","length","id","fn","memo","stylesInDom","isOldIE","document","all","atob","apply","arguments","getElement","target","parent","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","e","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","domStyle","refs","j","parts","addStyle","listToStyles","newStyles","base","part","css","media","insertStyleElement","style","Error","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","before","removeStyleElement","parentNode","removeChild","idx","indexOf","splice","createStyleElement","createElement","attrs","type","nonce","nc","getNonce","addAttrs","el","keys","forEach","setAttribute","obj","update","remove","result","default","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","href","styleSheet","cssText","createTextNode","newObj","DEBUG","newList","mayRemove","textStore","replaceText","index","replacement","filter","Boolean","cssNode","childNodes","location","baseUrl","protocol","host","currentDir","pathname","replace","fullMatch","origUrl","newUrl","unquotedOrigUrl","trim","$1","test","FCalc","_classCallCheck","fx","fy","_len","fVals","Array","_key","val","rel_logic","inv_logic","fA","fB","altInterpr","reEntry","lastOpen","fC","fD","fE","reEven","resEven","zeros","firstUndef","iFORM","calcfrom","inv","repeat","iRev","case0","case1","cont","implL","implR","pre","post","pad","num","size","String","replaceAll","find","escapeMeta","RegExp","addBefore","substr","replaceAt","FForm","fform_classCallCheck","_possibleConstructorReturn","_this","form","parseLinear","space","calc","isNaN","nestedVals","fReEntry","nested","altInterpretation","unmarked","vars","getVariables","vals","interKey","interpr","var","a","interCalc","b","f","interpret","interprForm","parse","traverseForm","fBranch","depth","v","symbol","fform_typeof","_get","_getPrototypeOf","_get2","formula","jsonStr","convFromLinear","json","console","log","cleanFormula","cleanLinear","flatten","arr","reduce","flat","toFlatten","isArray","constructFromLinear","inQuote","inSlash","char","compAll","countDepth","slice","prevChar","comp","reParts","split","reNested","sort","func","breakTrav","protoChart","width","innerWidth","height","innerHeight","margin","left","right","top","bottom","getRealDepth","ghosts","ancestors","data","textSubscript","text","selection","each","d3","append","attr","textSize","fontSize","fontFamily","fontStyle","container","node","getBBox","opacity","color","alpha","colorCopy","calcCircleDash","unit","fraction","_den","count","sign","den","Math","round","candidate","reduceRemainder","PI","circleDashArray","fractions","str","global","common","font","family","fontContext","ground","indef","light","dashes","basic","_objectSpread","gestalt","pos","neg","clearDefaults","svg","tree","nodeSize","w","h","nodeSeparation","hz","vt","applyAxisStyles","axis","selectAll","select","applyNodeStyles","nodes","nodePartitions","_nodePartitions","_slicedToArray","sets","forms","reEntries","reChilds","rePoints","elements","applyLinkStyles","links","linkPartitions","_linkPartitions","reChildLink","rePointLink","_nodePartitions2","pack","radius","padding","resolveNodes","leaves","pop","classed","consts","marked","imag","unclear","reChild","_nodePartitions3","invertFill","chart","_nodePartitions4","defs","grad_1","grad_2","openReEntries","D3Graph","graphType","opts","_this$constructor$gra","d3_graph_classCallCheck","proto","assign","parentId","lower","styleClass","chartFactory","d3_graph_objectSpread","args","constructor","design","_ref","nodeSep","dx","dy","layout","separation","x0","Infinity","x1","x","rootUnmarked","rootHeights","depthScale","domain","range","depthAxis","scale","tickSizeInner","tickSizeOuter","tickPadding","tickValues","enter","descendants","y","resolveLinks","d3_graph_slicedToArray","curve","counter","children","_ref3","sum","_ref4","_ref5","rad","textSz","raise","circleLabel","parentElement","fitChart","_ref6","save","format","date","timestamp","Date","getUTCFullYear","getUTCMonth","getUTCDate","getHours","getMinutes","getSeconds","svgEl","svgData","outerHTML","svgBlob","svgUrl","downloadLink","download","body","click","saveSvg","FGraph","fgraph_classCallCheck","fgraph_possibleConstructorReturn","expandedForm","expand_reEntry","fgraph_get","fgraph_getPrototypeOf","_form","graph","reForm","reverse","_nestedForm$space","unshift","nestedForm","_toConsumableArray","_space","lastNested","refForm","targetForm","refBranch","targetBranch","constructNested","__webpack_exports__"],"mappings":"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","file":"formform.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"d3\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"d3\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"formform\"] = factory(require(\"d3\"));\n\telse\n\t\troot[\"formform\"] = factory(root[\"d3\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js??ref--5-2!../../../node_modules/sass-loader/lib/loader.js!./d3-styles.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js??ref--5-2!../../../node_modules/sass-loader/lib/loader.js!./d3-styles.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js??ref--5-2!../../../node_modules/sass-loader/lib/loader.js!./d3-styles.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"\", \"\"]);\n\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return '@media ' + item[2] + '{' + content + '}';\n      } else {\n        return content;\n      }\n    }).join('');\n  }; // import a list of modules into the list\n\n\n  list.i = function (modules, mediaQuery) {\n    if (typeof modules === 'string') {\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    for (var i = 0; i < this.length; i++) {\n      var id = this[i][0];\n\n      if (id != null) {\n        alreadyImportedModules[id] = true;\n      }\n    }\n\n    for (i = 0; i < modules.length; i++) {\n      var item = modules[i]; // skip already imported module\n      // this implementation is not 100% perfect for weird media query combinations\n      // when a module is imported multiple times with different media queries.\n      // I hope this will never occur (Hey this way we have smaller bundles)\n\n      if (item[0] == null || !alreadyImportedModules[item[0]]) {\n        if (mediaQuery && !item[2]) {\n          item[2] = mediaQuery;\n        } else if (mediaQuery) {\n          item[2] = '(' + item[2] + ') and (' + mediaQuery + ')';\n        }\n\n        list.push(item);\n      }\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || '';\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */';\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n  return '/*# ' + data + ' */';\n}","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","export default class FCalc {\n    /*\n    =======================================================\n       'calc' module for formform (c) 2018 Peter Hofmann\n    =======================================================\n    */\n   \n    constructor() {\n    };\n\n    static rel_logic(fx, fy) { // verified\n        /* FORM arithmetic for commutative relation: x y */\n        if ( fx > 3 || fx < 0 || fy > 3 || fy < 0 ) return -98;\n        else if ( fx === 0 || fy === 1 ) { \n            return fy; // C3 /Theorem 2\n        } \n        else if ( fy === 0 || fx === 1 ) { \n            return fx; // C3 /Theorem 2\n        }\n        else if ( fx === fy ) { \n            return fx; // C5 /Theorem 5\n        }\n        else if ( (fx === 2 && fy === 3) || (fx === 3 && fy === 2) ) { \n            return 1; // C2 /Theorem 13 + C3 /Theorem 2\n        }\n        return -99; // error code\n    };\n    static rel(...fVals) { // verified\n        /* Shortcut for relation with n variables: x_1 ... x_n */\n        // var fVals = Array.prototype.slice.call(arguments);\n        if (fVals.length > 1) {\n            var val = 0;\n            for (var i in fVals) {\n                val = this.rel_logic( val,fVals[i] );\n            }\n            return val;\n        }\n        return -97; // error code\n    };\n\n    static inv_logic(fx) { // verified\n        /* FORM arithmetic for inversion/negation: (x) */\n        switch (fx) {\n        case 0:\n            return 1;\n        case 1:\n            return 0;\n        case 2:\n            return 3;\n        case 3:\n            return 2;\n        }\n        return -99; // error code\n    };\n    static inv(fx, n) { // verified\n        /* Shortcut for n inversions/negations: (x) */\n        if (n > 0) {\n            var val = fx;\n            for (var i=0; i<n; i++) {\n                val = this.inv_logic(val);\n            }\n            return val;\n        }\n        else return this.inv_logic(fx);\n        return -97; // error code\n    };\n\n\n    // ---------------------------\n    //  RE-ENTRY FORM CALCULATION\n    // ---------------------------\n\n    static uForm2(fA, fB, altInterpr=false) { // calculation verified (both interpr.)\n        return this.reEntry(false, false, altInterpr, fA, fB);\n    };\n    static iForm2(fA, fB, altInterpr=false) { // calculation verified (both interpr.)\n        return this.reEntry(false, true, altInterpr, fA, fB);\n    };\n    static uForm3(lastOpen, fA, fB, fC, altInterpr=false) { // calculation verified closed & open (both interpr.)\n        return this.reEntry(true, lastOpen, altInterpr, fA, fB, fC);\n    };\n    static iForm3(lastOpen, fA, fB, fC, altInterpr=false) { // calculation verified closed & open (both interpr.)\n        return this.reEntry(false, lastOpen, altInterpr, fA, fB, fC);\n    };\n    static uForm4(fA, fB, fC, fD, altInterpr=false) {\n        return this.reEntry(false, false, altInterpr, fA, fB, fC, fD);\n    };\n    static iForm4(fA, fB, fC, fD, altInterpr=false) {\n        return this.reEntry(false, true, altInterpr, fA, fB, fC, fD);\n    };\n    static uForm5(lastOpen, fA, fB, fC, fD, fE, altInterpr=false) {\n        return this.reEntry(true, lastOpen, altInterpr, fA, fB, fC, fD, fE);\n    };\n    static iForm5(lastOpen, fA, fB, fC, fD, fE, altInterpr=false) {\n        return this.reEntry(false, lastOpen, altInterpr, fA, fB, fC, fD, fE);\n    };\n\n    // static reEntry(... vars) {\n    //     return this.reEntry(false, false, vars);\n    // }\n    // static reEntry(reEven, ... vars) {\n    //     return this.reEntry(reEven, false, vars);\n    // }\n\n    static reEntry(reEven, lastOpen, altInterpr, ...fVals) {\n        /* FORM arithmetic for different self-equivalent re-entry FORMs\n         [Arguments] reEven: even re-entry-number? | lastOpen: last variable not crossed? | fVals: variables (0/1/2/3)\n\n         Note: calculation manually verified for \n         - (uFORM a1, res2) =((x)y)\n         - (iFORM a2, res2) ()=(a1x)y\n         - (iFORM b1, res3) [2|r|+1] ()=(((x)y)z) =((((((x)y)z)x)y)z)\n         - (iFORM b2, res3) [2|r|+1] ()=((b1x)y)z\n         - (uFORM c1, res3) [2|r|] =((((((x)y)z)x)y)z)\n         - (uFORM c2, res3) [2|r|] ()=((c1x)y)z\n         Should work with resolutions of 4, 5,  but needs verification.\n\n         My basic observations about self-equivalent re-entry FORMs:\n         - Every re-entry FORM needs to have an even number of crosses to be self-equivalent (uFORM):  = ((1)2) .\n           So with uneven resolutions, we always need to have an even re-entry number:  = ((((((1)2)3)1)2)3) .\n         - To be able to also have uneven re-entry numbers, either the resolution needs to be even\n           or we have to embed the re-entry FORM into a normal FORM that is one re-entry of that FORM:\n           () = (((1)2)3) <-> (((  = ((((((1)2)3)1)2)3) 1)2)3) .\n           These compositional re-entry FORMs are iFORMs, since they resolve to: (  = (()) ) .\n         - If the outmost cross of the FORM should be left out (open FORMs), this can only be done if we embed\n           a corresponding closed FORM of itself that either is or embeds its re-entry FORM (cases described above).\n           I believe the outmost (open) FORM is not being counted as a re-entry at all, since it's missing a cross.\n\n         This algorithm is based on the following rules/patterns/observations derived from \"uFORM iFORM\":\n         [1] If 1 is somewhere in the FORM, it will dominate all values in spaces deeper than m,\n             so the re-entry is obsolete and we can start calculate from this space. \n         [2] If there are 3/2 or 2/3 pairs in the FORM, the first term can be turned into 1, since\n             through C2 the second term can always be generated into its space, where 23 = 1.\n             Then we can proceed as in (1).\n         [3] If all variables are 0, we will have either a uFORM or iFORM, hence the value of the\n             FORM will be either 2 or 3, depending on the following cases:\n             - 2: closed,      resolution even, re-entry-number even/odd (a1)\n             - 2: closed/open, resolution odd,  re-entry-number even     (c1, c2)\n             - 3: open,        resolution even, re-entry-number even/odd (a2)\n             - 3: closed/open, resolution odd,  re-entry-number odd      (b1, b2)\n         Since [1][2][3] eliminate all other cases, all variables are now either 2 or 3 (and maybe 0s),\n         so using C2 as described above, only the last occasion of these variables need to be considered:\n         [4] If we use uFORM iFORM interpretation 2 (p.167) recursive identity ( mn <-> (())= ), C2 and C1\n              can be separated from 2/3 if there is an even number of crosses (or none) after the variable.\n             Then, depending on the FORM, we have either:\n             iFORM: (=(())) 2/3 <-> (2) 2/3  or\n             uFORM:  =(()) 2/3  <->  2 2/3\n         [5] If [4] does not apply or we decide for uFORM iFORM interpretation 1 (p.167): recursion instruction \n             ( mn -> =(()) ), we will have either variables of 2 or 3 which we cannot relate to , since\n             they need not be the same undetermined value. Using case distinction, we interpret the\n             last occasion of 2 or 3 as 0 and as 1, calculate everything with =2 and relate the results \n             using contravalence: ((x)y)((y)x) which yields the final result.\n        */\n        // check if arguments are actually defined\n        if (reEven === undefined) {\n            reEven = false;\n        }\n        if (lastOpen === undefined) {\n            lastOpen = false;\n        }\n\n        var resEven = (fVals.length%2 == 0); // even resolution?\n        var zeros = 0; // zero counter\n        var firstUndef = -1; // catches first mn/(mn)\n\n        // [3] determine if uFORM or iFORM\n        var uFORM = false;\n        var iFORM = false;\n        if (resEven) {\n            if (lastOpen) iFORM = true;\n            else uFORM = true;\n        }\n        else {\n            if (reEven) uFORM = true;\n            else iFORM = true;\n        }\n      \n        // check if there is 1/m somewhere in x_1  x_n\n        var calcfrom = -1;\n        for(var i=0; i<fVals.length; i++) {\n            var fx = fVals[i]; \n\n            if (fx == 1) {\n                calcfrom = i; // [1] if m is somewhere, set calculation start from there\n                break;\n            }\n            else if (fx == 0) zeros++; // [3] keep track of how many zeros there are\n            else if (fx == 2 || fx == 3) { // [2]\n                if(firstUndef == -1) firstUndef = i; // if there is a first 2/u or 3/i, remember\n                else if(fx != fVals[firstUndef]) {\n                    calcfrom = firstUndef; // if 3/2 or 2/3 pairs, set calculation form first undef. value\n                    break;\n                }\n            }\n        }\n      \n        if (zeros == fVals.length) {\n            // [3] in case all variables are n, just return the undefined/imaginary value of the FORM\n            if (iFORM) return 3;\n            else return 2;\n        }\n        if (calcfrom >= 0) {\n            // [1|2] if there is a 1/m somewhere in the form, we can easily calculate the rest from this point\n            var val = 1;\n            for(var i=calcfrom; i<fVals.length; i++) {      \n                if (lastOpen && i == fVals.length-1) {\n                    val = this.rel(val,fVals[i]); // if no cross on last var, don't invert\n                }\n                else val = this.inv( this.rel(val,fVals[i]) );\n            }\n            return val;\n        }\n      \n        // what remains, will only be either\n        // - (1) all variables are n/0 or mn/2   or\n        // - (2) all variables are n/0 or (mn)/3\n        // So we calculate from the last occasion of 2 or 3, because with C2 (degenerate) all else can be ignored\n\n        // for even closed re-entry-FORMs with uneven resolution (uFORM c1), we need to do the calculation twice\n        var repeat = (reEven && !resEven && !lastOpen)? 2:1;\n      \n        for(var i=(fVals.length*repeat)-1; i>=0; i--) {\n            var index = i%fVals.length; // repeated variable index\n\n            if (fVals[index] == 2 || fVals[index] == 3) {\n                var iRev = (fVals.length*repeat)-1 - i; // reverse index to easier check for interpretation 2 (see next)\n\n                if (altInterpr && ((lastOpen && iRev%2==0) || (!lastOpen && iRev%2==1))) {\n                    // uFORM iFORM interpretation 2: recursive identity ( =(()) <-> mn )\n                    // =(()) can be separated if there is an even number of crosses (or none) after the variable; this is the case if either:\n                    // - (1) the FORM is open and the backwards variable index is even      or\n                    // - (2) the FORM is closed and the backwards variable index is odd\n\n                    // to determine if the number of crosses between  and our var is even, we distinguish two cases:\n                    if (iFORM) return this.rel(3,fVals[index]); // iFORM: (=(()))x <-> (mn) x\n                    else return this.rel(2,fVals[index]);       // uFORM:  =(())x  <->  mn x\n                }\n                else {\n                    // [5] if everything else fails, use case distinction: uFORM iFORM (p.94); also according to:\n                    // uFORM iFORM (p.167) interpretation 1: recursion instruction ( =(()) and mn need to be differentiated)\n\n                    var case0 = 2; // re-entry =mn, because other mn=0\n                    if (lastOpen && !resEven && !reEven) case0 = this.inv(case0); // cross for integrated FORMs with uneven res. inside open FORMs (iFORM b2)\n                    for(var j=0; j<(fVals.length*repeat); j++) {\n                        var fx = 0; // all other values will be (degenerated to) zero\n                        if (j == i) {\n                            if(fVals[index] == 2) fx = 0; // last occasion of mn/2 will be interpreted as 0\n                            else fx = this.inv(0); // last occasion of (mn)/3 will be interpreted as (0)\n                        }\n                        if (lastOpen && j == fVals.length-1) case0 = this.rel(case0,fx); // if no cross on last var, don't invert\n                        else case0 = this.inv( this.rel(case0,fx) );\n                    }\n                    var case1 = 2; // re-entry =mn, because other mn=1\n                    if (lastOpen && !resEven && !reEven) case1 = this.inv(case1); // cross for integrated FORMs with uneven res. inside open FORMs (iFORM b2)\n                    for(var j=0; j<(fVals.length*repeat); j++) {\n                        var fx = 0; // all other values will be (degenerated to) zero\n                        if (j == i) {\n                            if(fVals[index] == 2) fx = 1; // last occasion of mn/2 will be interpreted as 1\n                            else fx = this.inv(1); // last occasion of (mn)/3 will be interpreted as (1)\n                        }\n                        if (lastOpen && j == fVals.length-1) case1 = this.rel(case1,fx); // if no cross on last var, don't invert\n                        else case1 = this.inv( this.rel(case1,fx) );\n                    }\n\n                    return this.cont( case0,case1 ); // contravalence of both cases\n                }\n\n            }\n        }\n      return -99; // error code\n    }; // end reEntry()\n\n\n    // ---------------------------\n    //  COMPLEX FORM CALCULATIONS\n    // ---------------------------\n\n    // - 2 VARIABLES\n\n    static implL(fx, fy) { // verified\n        /* FORM arithmetic for \"implication\": (x)y */\n        return this.rel( this.inv(fx),fy );\n    };\n    static implR(fx, fy) {\n        /* FORM arithmetic for \"implication\": x(y) */\n        return this.rel( fx,this.inv(fy) );\n    };\n\n    static pre(fx, fy) { // verified\n        /* FORM arithmetic for \"presection\"/\"decision\": ((x)y) */\n        return this.inv( this.implL(fx,fy) );\n    };\n    static post(fx, fy) { // verified\n        /* FORM arithmetic for \"postsection\"/\"decision\": (x(y)) */\n        return this.inv( this.implR(fx,fy) );\n    };\n\n    static cont(fx, fy) { // verified\n        /* FORM arithmetic for \"contravalence\"/\"either-or\": ((x)y) (x(y)) */\n        return this.rel( this.pre(fx,fy), this.post(fx,fy) );\n    };\n    static equiv(fx, fy) {\n        /* FORM arithmetic for \"equivalence\"/?: ( ((x)y) (x(y)) ) */\n        return this.inv( this.cont(fx,fy) );\n    };\n\n}","import * as d3 from 'd3';\n\n// ------------------------\n// jQuery replacements:\n\nexport function showAll(elems) {\n    if(typeof(elems) === 'string') elems = document.querySelectorAll(elems);\n    elems.forEach( (e,i) => {\n        show(e);\n    });\n}\nexport function show(elem) {\n    if(typeof(elem) === 'string') elem = document.querySelector(elem);\n    elem.classList.remove('d-none');\n    // elem.classList.add('is-visible');\n};\n\nexport function hideAll(elems) {\n    if(typeof(elems) === 'string') elems = document.querySelectorAll(elems);\n    elems.forEach( (e,i) => {\n        hide(e);\n    });\n}\nexport function hide(elem) {\n    if(typeof(elem) === 'string') elem = document.querySelector(elem);\n    elem.classList.add('d-none');\n\t// elem.classList.remove('is-visible');\n};\n\nexport function toggleAll(elems) {\n    if(typeof(elems) === 'string') elems = document.querySelectorAll(elems);\n    elems.forEach( (e,i) => {\n        toggle(e);\n    });\n}\nexport function toggle(elem) {\n    if(typeof(elem) === 'string') elem = document.querySelector(elem);\n    elem.classList.toggle('d-none');\n\t// elem.classList.toggle('is-visible');\n};\n\nexport function isVisible(elem) {\n    if(typeof(elem) === 'string') elem = document.querySelector(elem);\n    return ( !elem.classList.contains('d-none') );\n}\n// ------------------------\n\nexport function pad(num, size) {\n    /* Source: https://stackoverflow.com/a/2998822\n    Credits to: InfinitiesLoop */\n    var s = num+\"\";\n    while (s.length < size) s = \"0\" + s;\n    return s;\n}\n\nexport function saveSvg(svgEl, name) {\n    /* Source: https://stackoverflow.com/a/46403589\n    Credits to: defghi1977, DaveTheScientist, senz */\n    svgEl.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\");\n    var svgData = svgEl.outerHTML;\n    var preface = '<?xml version=\"1.0\" standalone=\"no\"?>\\r\\n';\n    var svgBlob = new Blob([preface, svgData], {type:\"image/svg+xml;charset=utf-8\"});\n    var svgUrl = URL.createObjectURL(svgBlob);\n    var downloadLink = document.createElement(\"a\");\n    downloadLink.href = svgUrl;\n    downloadLink.download = name;\n    document.body.appendChild(downloadLink);\n    downloadLink.click();\n    document.body.removeChild(downloadLink);\n}\n\nexport function flatten(arr) {\n    /* Source: https://stackoverflow.com/a/15030117 \n    Credits to: Noah Freitas */\n  return arr.reduce(function (flat, toFlatten) {\n    return flat.concat(Array.isArray(toFlatten) ? flatten(toFlatten) : toFlatten);\n  }, []);\n}\n\nexport function include(arr,obj) {\n    /*  Source: https://stackoverflow.com/a/143863\n    Credits to: Vinko Vrsalovic */\n    return (arr.indexOf(obj) != -1);\n}\n\nexport function traverse(o,func) {\n    /*  Source: https://stackoverflow.com/questions/722668/traverse-all-the-nodes-of-a-json-object-tree-with-javascript \n    Credits to: TheHippo */\n    for (var i in o) {\n        func.apply(null,[i,o[i]]);  // null or this?\n        if (o[i] !== null && typeof(o[i])==\"object\") {\n            //going one step down in the object tree!!\n            traverse(o[i],func);\n        }\n    }\n}\nString.prototype.replaceAll = function(find, replace, escapeMeta) {\n    /*  Modified from: https://stackoverflow.com/questions/1144783/how-to-replace-all-occurrences-of-a-string-in-javascript \n    Credits to: Sean Bright */\n    if(escapeMeta) find = escapeRegExp(find);\n    return this.replace(new RegExp(find, 'g'), replace);\n};\nexport function escapeRegExp(str) {\n    return str.replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\");\n}\nString.prototype.addBefore=function(index, replacement) {\n    return this.substr(0, index) + replacement+ this.substr(index);\n}\n\nexport function map(value, start1, stop1, start2, stop2) {\n    // Processing-like map function\n    return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nexport function arrayMoveItem(arr, from, to) {\n  arr.splice(to, 0, arr.splice(from, 1)[0]);\n}\n\nString.prototype.replaceAt=function(index, replacement) {\n    return this.substr(0, index) + replacement+ this.substr(index + replacement.length);\n}\n\nexport function getTimestamp() {\n    const date = new Date();\n\n    return (''\n    + date.getUTCFullYear()).substr(2) \n    + (pad((date.getUTCMonth()+1),2)) \n    + (pad(date.getUTCDate(),2)) + '-'\n    + (pad((date.getHours()),2))\n    + (pad((date.getMinutes()),2))\n    + (pad((date.getSeconds()),2));\n}","import { flatten, include } from '../../common/helper';\nimport FCalc from './fcalc';\n\nexport default class FForm extends FCalc {\n    /*\n    =======================================================\n       'form' module for formform (c) 2018 Peter Hofmann\n    =======================================================\n    */\n\n    constructor() {\n    };\n\n    // ----------------------------------------------------\n    // Form Calculation\n    // ----------------------------------------------------\n\n    static calc(form) {\n        /* recursive form calculation */\n        var fx = 0;\n        // make sure to have a json form, if not: try to convert\n        if(typeof(form) === 'string') form = this.parseLinear(form);\n\n        for (var i in form.space) {\n            if (form.space[i].type === 'form') {\n                fx = this.rel( fx,this.calc(form.space[i]) );\n            }\n            else if (form.space[i].type === 'const') {\n                fx = this.rel( fx,form.space[i].value );\n            }\n            else if (form.space[i].type === 'var') {\n                if(!isNaN(form.space[i].value)) fx = this.rel( fx,form.space[i].value );\n            }\n            else if (form.space[i].type === 'unclear') {\n                fx = this.rel( fx,form.space[i].value );\n            }\n            else if (form.space[i].type === 'reEntry') {\n                var nestedVals = [];\n                var fReEntry = form.space[i];\n\n                for (var j in fReEntry.nested) {\n                    nestedVals.push( this.calc(fReEntry.nested[j]) );\n                }\n                \n                // notation reading: {deepest, ..., shallowest}  use nestedVals.reverse() to reverse variables\n                fx = this.rel( fx,this.reEntry(fReEntry.reEven, fReEntry.lastOpen, fReEntry.altInterpretation, ...nestedVals) );\n            }\n        }\n        if(form.unmarked) return fx;\n        else return this.inv( fx );\n    };\n\n    static calcAll(form) {\n        /* Interpret and calculate all possible values for the form */\n\n        // make sure to have a json form, if not: try to convert\n        if(typeof(form) === 'string') form = this.parseLinear(form);\n\n        var vars = this.getVariables(form);\n        var vals = {};\n\n        var interKey = ''+vars.join()+';';\n\n        switch (vars.length) {\n            case 0:\n                vals['Result'] = this.calc(form);\n                break;\n            case 1:\n                var interpr = [ {var: vars[0], value: null} ];\n                for (var a=0; a<4; a++) {\n                    interpr[0].value = a;\n                    vals[interKey+a] = this.interCalc(form, interpr);//[a]);\n                }\n                break;\n            case 2:\n                var interpr = [ {var: vars[0], value: null}, \n                                {var: vars[1], value: null} ];\n                for (var a=0; a<4; a++) {\n                    interpr[0].value = a;\n                    for (var b=0; b<4; b++) {\n                        interpr[1].value = b;\n                        vals[interKey+a+''+b] = this.interCalc(form, interpr);//[a,b]);\n                    }\n                }\n                break;\n            case 3:\n                var interpr = [ {var: vars[0], value: null}, \n                                {var: vars[1], value: null},\n                                {var: vars[2], value: null} ];\n                for (var a=0; a<4; a++) {\n                    interpr[0].value = a;\n                    for (var b=0; b<4; b++) {\n                        interpr[1].value = b;\n                        for (var c=0; c<4; c++) {\n                            interpr[2].value = c;\n                            vals[interKey+a+''+b+''+c] = this.interCalc(form, interpr);//[a,b,c]);\n                        }\n                    }\n                }\n                break;\n            case 4:\n                var interpr = [ {var: vars[0], value: null}, \n                                {var: vars[1], value: null},\n                                {var: vars[2], value: null},\n                                {var: vars[3], value: null} ];\n                for (var a=0; a<4; a++) {\n                    interpr[0].value = a;\n                    for (var b=0; b<4; b++) {\n                        interpr[1].value = b;\n                        for (var c=0; c<4; c++) {\n                            interpr[2].value = c;\n                            for (var d=0; d<4; d++) {\n                                interpr[3].value = d;\n                                vals[interKey+a+''+b+''+c+''+d] = this.interCalc(form, interpr);//[a,b,c,d]);\n                            }\n                        }\n                    }\n                }\n                break;\n            case 5:\n                var interpr = [ {var: vars[0], value: null}, \n                                {var: vars[1], value: null},\n                                {var: vars[2], value: null},\n                                {var: vars[3], value: null},\n                                {var: vars[4], value: null} ];\n                for (var a=0; a<4; a++) {\n                    interpr[0].value = a;\n                    for (var b=0; b<4; b++) {\n                        interpr[1].value = b;\n                        for (var c=0; c<4; c++) {\n                            interpr[2].value = c;\n                            for (var d=0; d<4; d++) {\n                                interpr[3].value = d;\n                                for (var e=0; e<4; e++) {\n                                    interpr[4].value = e;\n                                    vals[interKey+a+''+b+''+c+''+d+''+e] = this.interCalc(form, interpr);//[a,b,c,d,e]);\n                                }\n                            }\n                        }\n                    }\n                }\n                break;\n            case 6:\n                var interpr = [ {var: vars[0], value: null}, \n                                {var: vars[1], value: null},\n                                {var: vars[2], value: null},\n                                {var: vars[3], value: null},\n                                {var: vars[4], value: null},\n                                {var: vars[5], value: null} ];\n                for (var a=0; a<4; a++) {\n                    interpr[0].value = a;\n                    for (var b=0; b<4; b++) {\n                        interpr[1].value = b;\n                        for (var c=0; c<4; c++) {\n                            interpr[2].value = c;\n                            for (var d=0; d<4; d++) {\n                                interpr[3].value = d;\n                                for (var e=0; e<4; e++) {\n                                    interpr[4].value = e;\n                                    for (var f=0; f<4; f++) {\n                                        interpr[5].value = f;\n                                        vals[interKey+a+''+b+''+c+''+d+''+e+''+f] = this.interCalc(form, interpr);//[a,b,c,d,e,f]);\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n                break;\n        }\n        return vals;\n    };\n\n    static interCalc(form, interpr) {\n        return this.calc( this.interpret(form, interpr) );\n    };\n\n    static interpret(form, interpr) {\n        // make sure to have a json form, if not: try to convert\n        if(typeof(form) === 'string') form = this.parseLinear(form);\n\n        var interprForm = JSON.parse(JSON.stringify(form)); // clone form\n\n        this.traverseForm(interprForm, function(fBranch,depth,space) {\n\n            for (var i in space) {\n                if (space[i].type === 'var') {\n                    for (var v in interpr) {\n                        if (space[i].symbol === interpr[v].var) {\n\n                            space[i].value = interpr[v].value;\n                            break;\n                        }\n                    }\n                    // if(!isNaN(space[i].value)) {\n                    //     space[i].type = 'const';\n                    // }\n                }\n            }\n        });\n\n        return interprForm;\n    };\n\n    // ----------------------------------------------------\n    // Extensions of FCalc\n    // ----------------------------------------------------\n\n    static rel_logic(fx, fy) {\n        if(typeof(fx) === Array || typeof(fy) === Array) {\n            return null;\n        }\n        return super.rel_logic(fx, fy);\n    };\n    static rel(...fVals) {\n        return super.rel(...fVals);\n    };\n\n    static inv_logic(fx) {\n        if(typeof(fx) === Array) {\n            return null;\n        }\n        return super.inv_logic(fx);\n    };\n    static inv(fx, n) {\n        return super.inv(fx, n);\n    };\n\n    // ----------------------------------------------------\n    // Conversions\n    // ----------------------------------------------------\n\n    static parseLinear(formula) {\n        /* Converts from paranthesis notation into JSON string and parses as JSON object */\n\n        // convert the formula into a JSON string\n        var jsonStr = this.convFromLinear(formula);\n\n        // console.log(jsonStr);\n\n        // try parsing the string as a JSON object\n        var json = null;\n        try {\n            var json = JSON.parse(jsonStr); // $.parseJSON(jsonStr);\n        } catch(e) {\n            console.log(e);\n        }\n\n        return json;\n    }\n\n    static convFromLinear(formula) {\n        // clean formula string from whitespace\n        var cleanFormula = this.cleanLinear(formula);\n        var arr = this.constructFromLinear(cleanFormula);\n        return flatten(arr).join('');\n    }\n\n    static cleanLinear(formula) {\n        var cleanFormula = '';\n        var inQuote = false;\n        var inSlash = false;\n\n        for (var i in formula) {\n            var char = formula[i];\n            if(typeof(char) !== \"string\") break; // prototype hacks\n\n            if (char === '\"' && !inSlash) inQuote = !inQuote;\n            if (char === '/' && !inQuote) inSlash = !inSlash;\n\n            // omit whitespace outside of quotes\n            if (char === ' ') {\n                if (inQuote ||inSlash) cleanFormula += char;\n            }\n            else cleanFormula += char;\n        }\n        return cleanFormula;\n    }\n\n    static constructFromLinear(formula) {\n        /* Converts from paranthesis notation to JSON-form */\n\n        var compAll = [];\n        var unmarked = true;\n\n        // check for all enclosing outer form\n        var countDepth = 0;\n        var inQuote = false;\n        var inSlash = false;\n        var outerMarkCount = 0;\n        for (var i in formula) {\n            var char = formula[i];\n            if(typeof(char) !== \"string\") break; // prototype hacks\n            // console.log(char);\n            if (!inQuote && !inSlash) {\n                if (char === '(') {\n                    if ((countDepth == 0) && (i != 0)) break;\n                    countDepth++;\n                }\n                else if (char === ')') {\n                    countDepth--;\n                    if (countDepth == 0) {\n                        if (i == formula.length-1) {\n                            unmarked = false;\n                            break;\n                        }\n                        else break;\n                    }\n                }\n            }\n            if (char === '\"' && !inSlash) inQuote = !inQuote;\n            if (char === '/' && !inQuote) inSlash = !inSlash;\n        }\n\n        compAll.push('  {');\n        compAll.push('\"type\":\"form\",');\n\n        if (unmarked) compAll.push('\"unmarked\":true,');\n        else formula = formula.slice(1,formula.length-1);\n\n        compAll.push('\"space\":[');   \n\n\n        var parts = [];\n        parts.push('');\n\n        var countDepth = 0;\n        var inQuote = false;\n        var inSlash = false;\n\n        var optChar = '';\n        var nestChar = '';\n\n        for (var i in formula) {\n            var char = formula[i];\n            var prevChar = formula[i-1];\n            if(typeof(char) !== \"string\") break; // prototype hacks\n            // console.log(char);\n            if (!inQuote && !inSlash) {\n                if (char === ')' ||char === '}') countDepth--;\n                if (char === '(' ||char === '{') {\n                    // console.log(countDepth);\n                    if (countDepth === 0) {\n                        // first (x) doesn't need to be separated\n                        if (i > 0) parts.push('');\n                    }\n                    countDepth++;\n                }\n                else if ( (prevChar === ')' ||prevChar === '}') && !(char === ')' ||char === '}') ) {\n                    // console.log(countDepth);\n                    // if char follows (x), separate; but not if it is another ')'\n                    if (countDepth === 0) parts.push('');\n                }\n                // unique separation chars for re-entry forms for easy splitting\n                if (countDepth === 1 && char === ',') char = nestChar;\n                else if (countDepth === 1 && char === '|') char = optChar;\n                // console.log(countDepth + ': ' + char);\n            }\n            if (char === '\"' && !inSlash) inQuote = !inQuote;\n            if (char === '/' && !inQuote) inSlash = !inSlash;\n            // console.log(countDepth);\n            // add char to the latest pushed part\n            parts[parts.length-1] += char;\n        }\n\n\n        \n        for (var i in parts) {\n\n            if (parts[i][0] === '(') { \n                // if part is form\n                // parts[i] = this.constructFromLinear( parts[i].slice(1,parts[i].length-1) );\n                var comp = [];\n                // comp.push('{');\n                comp.push( this.constructFromLinear(parts[i]) );\n                // comp.push('}');\n\n                parts[i] = comp.slice();\n            }\n            else if (parts[i][0] === '{') {\n                // else if part is re-entry form\n\n                var comp = [];\n                comp.push('  {');\n                comp.push('\"type\":\"reEntry\",');\n\n                var content = parts[i].slice(1,parts[i].length-1);\n\n                var reParts = content.split(optChar);\n\n                if (reParts[0] === '2r' || reParts[1] === '2r' || reParts[2] === '2r') comp.push('\"reEven\":true,');\n                else comp.push('\"reEven\":false,');\n\n                if (reParts[0] === 'open' || reParts[1] === 'open' || reParts[2] === 'open') comp.push('\"lastOpen\":true,');\n                else comp.push('\"lastOpen\":false,');\n\n                if (reParts[0] === 'alt' || reParts[1] === 'alt' || reParts[2] === 'alt') comp.push('\"altInterpretation\":true,');\n                else comp.push('\"altInterpretation\":false,');\n\n                var reNested = reParts[reParts.length-1].split(nestChar);\n\n                // console.log(reParts[reParts.length-1]);\n                // console.log(reNested);\n\n                comp.push('\"nested\":[');\n\n                for (var n in reNested) {\n                    comp.push( this.constructFromLinear(reNested[n]) );\n                    if (n < reNested.length-1) comp.push(',');\n                    // reNested[n] = this.constructFromLinear( reNested[n] );\n                }\n\n                comp.push(']}  ');\n\n                parts[i] = comp.slice();\n            }\n            else {\n                // else we have variables/constants\n\n                var comp = [];\n\n                var vars = [];\n                var inQuote = false;\n                var inSlash = false;\n\n                for (var j in parts[i]) {\n                    var char = parts[i][j];\n                    if(typeof(char) !== \"string\") break; // prototype hacks\n\n                    if (char === '\"' && !inSlash) {\n                        inQuote = !inQuote;\n                        // mark quoted string with a '' for identification\n                        if (inQuote) vars.push('');\n                    }\n                    else if (char === '/' && !inQuote) {\n                        inSlash = !inSlash;\n                        // mark unclear form with a '' for identification\n                        if (inSlash) vars.push('');\n                    }\n                    else {\n                        if (!inQuote && !inSlash) vars.push('');\n                        // quote chars inside slashes will be escaped to not interfere with JSON syntax\n                        if (char === '\"' && inSlash) vars[vars.length-1] += '\\\\' + char;\n                        else vars[vars.length-1] += char;\n                    }\n                }\n\n                for (var v in vars) {\n                    if(typeof(vars[v]) !== \"string\") break; // prototype hacks\n\n                    comp.push('  {');\n                    if (!isNaN(vars[v]) && vars[v].length > 0 \n                        && vars[v][0] !== '' && vars[v][0] !== '') {\n                        comp.push('\"type\":\"const\",'); \n                        comp.push('\"value\":');\n                        comp.push(vars[v]);\n                    }\n                    else if (vars[v][0] === '') {\n                        comp.push('\"type\":\"unclear\",');\n                        comp.push('\"value\":2,');\n                        comp.push('\"symbol\":');\n                        comp.push('\"'+vars[v].slice(1)+'\"');\n                    }\n                    else {\n                        comp.push('\"type\":\"var\",');\n                        comp.push('\"value\":\"*\",');\n                        comp.push('\"symbol\":');\n                        if(vars[v][0] === '') comp.push('\"'+vars[v].slice(1)+'\"');\n                        else comp.push('\"'+vars[v]+'\"');\n                    }\n                    comp.push('}  ');\n                    if (v < vars.length-1) comp.push(',');\n                }\n\n                parts[i] = comp.slice();\n            } // end else\n\n            compAll.push(parts[i]);\n            if (i < parts.length-1) compAll.push(',');\n        }\n\n        compAll.push(']}  ');\n\n        return compAll;\n    }\n\n    // ----------------------------------------------------\n    // Representation\n    // ----------------------------------------------------\n\n    static jsonString(form) {\n        /* return json-representation of the specified FORM */\n        if(typeof(form) === 'string') form = this.parseLinear(form);\n    \n        return JSON.stringify(form, undefined, 2);\n    }\n\n    // ----------------------------------------------------\n    // Helper\n    // ----------------------------------------------------\n\n    static getVariables(form) {\n        if(typeof(form) === 'string') form = this.parseLinear(form);\n\n        var vars = [];\n        this.traverseForm(form, function(fBranch,depth,space) {\n\n            for (var i in space) {\n                if (space[i].type === 'var') {\n                    if (!include(vars, space[i].symbol)) {\n                        vars.push(space[i].symbol);\n                    }\n                }\n            }\n        });\n        return vars.sort();\n    };\n\n    static traverseForm(form,func) {\n        /* traverses only form-types in a json tree */\n        let breakTrav = func.apply(this,[form,form.depth,form.space]);\n\n        if (form.space) { // form.type === 'form'\n            if (form.space.length > 0) {\n                for (var i in form.space) {\n                    if (form.space[i].type === 'form' || form.space[i].type === 'reEntry') {\n                        let breakLoop = this.traverseForm(form.space[i],func);\n                        if (breakLoop) break;\n                    }\n                }\n            }\n        }\n        else if (form.nested) { // form.type === 'reEntry'\n            if (form.nested.length > 0) {\n                for (var i in form.nested) {\n                    let breakLoop = this.traverseForm(form.nested[i],func);\n                    if (breakLoop) break;\n                }\n            }\n        }\n        else console.log('ERROR: Not a form!');\n\n        return breakTrav;\n    };\n\n}","import * as d3 from 'd3';\n\nconst protoChart = {\n    width: window.innerWidth,\n    height: window.innerHeight,\n    margin: {\n      left: 10,\n      right: 10,\n      top: 10,\n      bottom: 10,\n    },\n  };\n  \nexport default function chartFactory(opts, proto = protoChart) {\n\n  const chart = Object.assign({}, proto, opts);\n  if(opts.parentId) chart.parent = d3.select(`#${opts.parentId}`);\n  else d3.select('body');\n\n  chart.svg = chart.parent\n    .append('svg').lower()\n    .attr('id', chart.id || 'chart')\n    .attr('width', chart.width - chart.margin.right)\n    .attr('height', chart.height - chart.margin.bottom);\n\n  if (opts.styleClass) chart.svg.attr('class', opts.styleClass);\n\n  chart.container = chart.svg.append('g')\n    .attr('id', 'container')\n    .attr('transform', `translate(${chart.margin.left}, ${chart.margin.top})`);\n\n  return chart;\n}\n\nexport function fitChart(chart, padding) {\n  // calculate real dimensions of a chart (assumes chart is a g-element wrapped inside an svg)\n  d3.select(chart.node().parentElement)\n      .attr('width', chart.node().getBBox().width + padding.left + padding.right)\n      .attr('height', chart.node().getBBox().height + padding.top + padding.bottom);\n}\n\nexport function getRealDepth(d) {\n  // calculates the real depth of a FORM by subtracting unmarked and open reEntry FORMs\n  const ghosts = d.ancestors()\n      .filter(e => (e.data.type === 'form' && e.data.unmarked || \n                e.data.type === 'reEntry' && e.data.lastOpen)).length;\n  return d.depth - ghosts;\n}\n\nexport function textSubscript(text) {\n  // selection module to split text into parts for subscripts (e.g. \"x_n\")\n  return (selection) => {\n    selection.each(function(d) {\n\n        const split = text(d).split('_');\n        if (split.length === 2) {\n\n          d3.select(this).append('tspan')\n            .text(d => split[0]);\n\n          d3.select(this).append('tspan')\n            .text(d => split[1])\n            .attr('dx', 1)\n            .attr('dy', 6)\n            .attr('font-size', '.8em');\n        }\n        else {\n          d3.select(this)\n            .text(text(d));\n        }\n\n    })\n  };\n}\n\nexport function textSize(text, fontSize='inherit', fontFamily='inherit', fontStyle='normal') {\n  /* Source: https://gist.github.com/huytd/327e453c95ca3edadb32d0c867e2561b \n  Credits to: Huy Tr. */\n  if (!d3) return;\n  var container = d3.select('body').append('svg');\n  container.append('text').style('font',`${fontStyle} ${fontSize} ${fontFamily}`)\n      .attr('x','-9999').attr('y','-9999').text(text);\n  var size = container.node().getBBox();\n  container.remove();\n  return { width: size.width, height: size.height };\n}\n\nexport function opacity(color, alpha) {\n  const colorCopy = d3.color(color);\ncolorCopy.opacity = alpha;\nreturn colorCopy;\n}\n\nexport function reduceRemainder(num, _den) {\n  let count = 0;\n  let sign = 1;\n  let den = Math.round(_den);\n  let candidate = den;\n  while (num % den > 0.3) {\n      candidate += sign * 0.001;\n      if (num%candidate < num%den) den = candidate;\n\n      if(count >= 5000) {\n          candidate = Math.round(_den);\n          sign = -1;\n      }\n      if(count >= 10000) break;\n      count++;\n  }\n  // console.log(num%den);\n  return den;\n}\nexport function calcCircleDash(r, unit, fraction) {\n  const circ = Math.PI*2 * r;\n  return reduceRemainder(circ, unit) * fraction;\n}\nexport function circleDashArray(r, unit, fractions) {\n  let str = '';\n  for (let i in fractions) {\n      str = str.concat(`${ calcCircleDash(r, unit, fractions[i]) }px `);\n  }\n  return str;\n}\n\n// export function dashArray(r, unit, fractions) {\n//   let str = '';\n//   for (let i in fractions) {\n//       str = str.concat(`${ calcCircleDash(r, unit, fractions[i]) }px `);\n//   }\n//   return str;\n// }\n\nexport function circleLabel(text, fontSize='inherit', fontFamily='inherit') {\n  // selection module to split text into parts for subscripts (e.g. \"x_n\")\n  return (selection) => {\n\n      selection.each(function(d) {\n\n          const textSz = textSize(text(d), fontSize, fontFamily);\n          const margin = 50;\n\n          d3.select(this).append('text')\n              .style('font', `normal ${fontSize} ${fontFamily}`)\n              .style('text-anchor', 'middle')\n              .raise()\n              .text(d => text(d));\n\n          d3.select(this).filter(d => d.r*2 >= textSz.width + margin).select('text')\n              .classed('label inside', true)\n              .attr('y', d => d.r - textSz.height*0.5 )\n              .attr('dominant-baseline','baseline');\n\n          d3.select(this).filter(d => d.r*2 < textSz.width + margin).select('text')\n              .classed('label outside', true)\n              .attr('y', d => d.r + 4)\n              .attr('dominant-baseline','hanging');\n\n      });\n  };\n}","import * as d3 from 'd3';\nimport { getRealDepth, opacity, circleDashArray } from '../../common/d3-helper';\n\n/* Cascading D3-Styles - by Peter Hofmann, 12/2018 */\n\n// -----------------------\n// global styles\n\nconst global = {\n    common: {\n        font: { family: 'sans-serif', \n                size: '14px',\n            },\n        fontContext: { family: 'sans-serif',\n                        size:  '9px',\n        },\n        color: {base: d3.color('black'),\n                ground: d3.color('white'),\n                indef: d3.color('red'),\n                light: d3.color('#ddd'),\n            },\n        dashes: {\n            },\n    }\n};\nglobal.basic = {\n    ...global.common,\n    font: { ...global.common.font,\n            family: 'georgia, serif', \n        },\n};\nglobal.gestalt = {\n    ...global.common,\n    font: { ...global.common.font,\n            family: 'sans-serif', \n    },\n    color: {...global.common.color,\n            pos: d3.color('white'), \n            neg: d3.color('black')\n        },\n};\nconst [basic, gestalt] = [global.basic, global.gestalt];\n\nexport function clearDefaults(svg) {\n    svg.attr('stroke','none').attr('fill','none');\n}\n\n// -----------------------\n// d3.tree styles:\n\nexport const tree = {\n    common: {\n        nodeSize: {w: 10.0, h: 10.0}, // size of nodes\n        nodeSeparation: {hz: 20, vt: 40}, // separation between nodes\n        dashes: {link: '4px 6px'\n            },\n    }\n};\n\ntree.basic = {\n    ...basic,\n    ...tree.common,\n};\ntree.basic.applyAxisStyles = function(axis) {\n\n    axis.selectAll('.tick').select('line')\n        .style('stroke-width', this.nodeSize.w*1.5)\n        .style('stroke', '#f4f4f4')\n    axis.selectAll('.tick').select('text')\n        // .attr('x', -2)\n        .attr('text-anchor', 'start');\n\n}\ntree.basic.applyNodeStyles = function(nodes, nodePartitions) {\n    const [leaves, sets, forms, reEntries, reChilds, rePoints, elements, vars, consts, unclear] = nodePartitions;\n\n    forms.selectAll('circle')\n        .style('stroke', this.color.base.toString())\n        .style('fill', this.color.ground.toString());\n\n\n    elements.selectAll('circle')\n        .style('fill', this.color.base.toString());\n\n    reEntries.selectAll('circle')\n        .style('stroke', this.color.indef.toString())\n        .style('fill', this.color.indef.toString())\n        .filter(d => d.data.lastOpen)\n            .style('fill', this.color.ground.toString());\n    reChilds.selectAll('circle')\n        .style('stroke', this.color.indef.toString())\n        .style('stroke-dasharray', d => circleDashArray(d.r, 3, [1]));\n    rePoints.selectAll('circle')\n        .style('fill', this.color.indef.toString());\n\n    nodes.selectAll('text')\n        .style('font', `normal ${this.font.size} ${this.font.family}`)\n        .style('dominant-baseline','middle')\n        .style('fill', this.color.base.toString())\n\n    sets.selectAll('circle.inner')\n        // .classed('inner')\n        .style('stroke', 'none')\n        .style('fill', this.color.base.toString());\n\n};\ntree.basic.applyLinkStyles = function(links, linkPartitions) {\n    const [reChildLink, rePointLink] = linkPartitions;\n\n    links.selectAll('path')\n        .style('stroke', this.color.base.toString());\n\n    reChildLink.selectAll('path')\n        .style('stroke', this.color.indef.toString())\n        .style('stroke-dasharray', this.dashes.link);\n\n    rePointLink.selectAll('path')\n        .style('stroke', this.color.indef.toString())\n        .style('stroke-dasharray', this.dashes.link);\n};\n\ntree.gestalt = {\n    ...gestalt,\n    ...tree.common,\n};\ntree.gestalt.applyAxisStyles = function(axis) {\n    tree.basic.applyAxisStyles(axis);\n}\ntree.gestalt.applyNodeStyles = function(nodes, nodePartitions) {\n    const [leaves, sets, forms, reEntries, reChilds, rePoints, elements, vars, consts, unclear] = nodePartitions;\n\n    tree.basic.applyNodeStyles(nodes, nodePartitions);\n};\ntree.gestalt.applyLinkStyles = function(links, linkPartitions) {\n    // const [reChildLink] = linkPartitions;\n\n    tree.basic.applyLinkStyles(links, linkPartitions);\n};\n\n// -----------------------\n// d3.pack styles:\n\nexport const pack = {\n    common: {\n        radius: 14, // 15\n        padding: 14, // 12\n    }\n};\n\npack.basic = {\n    ...basic,\n    ...pack.common,\n};\npack.basic.applyNodeStyles = function(nodes, nodePartitions) {\n    const [leaves, sets, forms, reEntries, reChilds, rePoints, elements, vars, consts, unclear] = nodePartitions;\n\n    forms.select('circle')\n        .style('stroke', this.color.base.toString())\n        .filter(d => d.data.unmarked)\n            .style('stroke','none');\n    reEntries.select('circle')\n        .style('stroke', this.color.indef.toString())\n        .filter(d => d.data.lastOpen)\n            .style('stroke-dasharray', d => circleDashArray(d.r, 14, [2/5, 3/5]) );\n                // `${ calcCircleDash(d.r, 14, 2/5) }px\n                //  ${ calcCircleDash(d.r, 14, 3/5) }px`); // this.dashes.wide\n            // .style('stroke','none');\n\n    elements.selectAll('text')\n        .style('font', `normal ${this.font.size} ${this.font.family}`)\n        .style('dominant-baseline','middle')\n        .style('text-anchor', 'middle')\n        .style('fill', this.color.base.toString());\n\n    unclear.select('rect')\n        .style('fill', this.color.light.toString());\n\n    rePoints.select('circle')\n        .style('fill', this.color.indef.toString())\n        .style('stroke','none');\n\n    const reEvenLabels = reEntries.select('.label')\n        .style('stroke', 'none')\n        .style('fill', this.color.indef.toString());\n};\n\npack.gestalt = {\n    ...gestalt,\n    ...pack.common,\n};\npack.gestalt.invertFill = function(d) {\n    return getRealDepth(d)%2 ? this.color.pos.toString() : this.color.neg.toString();\n};\npack.gestalt.applyNodeStyles = function(nodes, nodePartitions, chart) {\n    const [leaves, sets, forms, reEntries, reChilds, rePoints, elements, vars, consts, unclear] = nodePartitions;\n\n    const defs = d3.select(chart.node().parentNode)\n        .append('defs');\n    const grad_1 = defs.append('radialGradient').attr('id', 'grad-indef-outin')\n        .attr('fx','20%')\n        // .attr('r','55%');\n        // grad_1.append('stop')\n        //     .attr('offset','60%').attr('stop-color', this.color.pos.toString() );\n        // grad_1.append('stop')\n        //     .attr('offset','100%').attr('stop-color', this.color.indef.toString() ); // <- new\n        grad_1.append('stop')\n            .attr('offset','40%').attr('stop-color', opacity(this.color.indef, 0.3).toString() );\n            grad_1.append('stop')\n            .attr('offset','90%').attr('stop-color', opacity(this.color.indef, 0.8).toString() );\n        grad_1.append('stop')\n            .attr('offset','100%').attr('stop-color', opacity(this.color.indef, 1.0).toString() );\n    const grad_2 = defs.append('radialGradient').attr('id', 'grad-indef-inout')\n        // .attr('spreadMethod','reflect')\n        .attr('fx','20%')\n        // .attr('r','55%');\n        grad_2.append('stop')\n            .attr('offset','10%').attr('stop-color', opacity(this.color.indef, 1.0).toString() );\n        grad_2.append('stop')\n            .attr('offset','50%').attr('stop-color', opacity(this.color.indef, 0.6).toString() );\n        grad_2.append('stop')\n            .attr('offset','60%').attr('stop-color', opacity(this.color.indef, 0.4).toString() );\n        grad_2.append('stop')\n            .attr('offset','100%').attr('stop-color', opacity(this.color.indef, 0.0).toString() );\n\n    forms.select('circle').filter(d => !d.data.unmarked)\n        .style('stroke', 'none')\n        .style('fill', d => this.invertFill(d));\n\n    reEntries.select('circle')\n        .style('stroke', d => (d.parent.data.type === 'reEntry') ? this.color.pos.toString() : 'none' )\n        .style('fill', 'url(#grad-indef-outin)');\n\n    const openReEntries = reEntries.select('circle').filter(d => d.data.lastOpen)\n        .style('fill', 'url(#grad-indef-inout)')\n        .style('stroke-dasharray', d => circleDashArray(d.r, 8, [2/5, 3/5]) );\n\n    openReEntries.filter(d => ((d.parent.data.type !== 'reEntry') ||!getRealDepth(d)%2) ) //  \n            .style('stroke', d => this.color.indef.toString());\n\n    openReEntries.filter(d => (d.parent.data.type === 'reEntry') && !d.parent.data.lastOpen)\n            .style('stroke', d => this.color.pos.toString());\n\n            // .style('fill', d => {\n            //     // if(d.parent.data.type === 'reEntry')\n            //     return getRealDepth(d)%2 ? '#ffdddd' : '#aa0000';\n            // });\n\n    elements.selectAll('text')\n        .style('font', `normal ${this.font.size} ${this.font.family}`)\n        .style('dominant-baseline','middle')\n        .style('text-anchor', 'middle')\n        .style('stroke', 'none')\n        .style('fill', d => this.invertFill(d));\n\n    unclear.select('rect')\n        .style('fill',this.color.light.toString());\n    unclear.select('text')\n        .style('fill',this.color.base.toString());\n        \n    rePoints.select('circle')\n        .style('fill',this.color.indef.toString())\n        .style('stroke','none')\n        .filter(d => d.parent.data.type === 'reEntry')\n            .style('stroke', this.color.indef.toString())\n            .style('fill', this.color.pos.toString())\n            .attr('transform', 'scale(1.5)');\n    // elements.filter(d => (type === 'var' || type === 'const' || type === 'unclear') )\n\n    const reEvenLabels = reEntries.select('.label')\n        .style('stroke', 'none')\n        .style('fill', d => (d.parent.data.type === 'reEntry' && !d.parent.data.lastOpen) ? this.color.pos.toString() : this.color.indef.toString());\n    reEntries.select('.label.inside')\n        .style('fill', d => (d.parent.data.type !== 'reEntry' && d.data.lastOpen) ? this.color.indef.toString() : this.color.pos.toString());\n\n};\n\n","import * as d3 from 'd3';\n\nimport { saveSvg, pad, getTimestamp } from '../../common/helper';\nimport chartFactory, { fitChart, textSize, textSubscript, circleLabel } from '../../common/d3-helper';\n\nimport './d3-styles.scss';\nimport * as styles from './d3-styles.js';\n\n\nfunction resolveNodes(root, nodes) {\n    // resolves descendant nodes into filtered selections\n    const leaves = nodes.filter(d => root.leaves().filter(l => l === d).pop() )\n        .classed('leaf', true);\n\n    const sets = nodes.filter(d => d.data.type === 'form' ||d.data.type === 'reEntry')\n        .classed('form', true)\n    const forms = sets.filter(d => d.data.type === 'form')\n        .classed('form', true);\n    const reEntries = sets.filter(d => d.data.type === 'reEntry')\n        .classed('reEntry', true);\n\n    const elements = nodes.filter(d => !(d.data.type === 'form' ||d.data.type === 'reEntry'))\n        .classed('element', true);\n    const vars = elements.filter(d => d.data.type === 'var')\n        .classed('var', true);\n    let consts = elements.filter(d => d.data.type === 'const')\n        .classed('const', true);\n    consts.unmarked = elements.filter(d => d.data.value == 0).classed('unmarked', true);\n    consts.marked = elements.filter(d => d.data.value == 1).classed('marked', true);\n    consts.indef = elements.filter(d => d.data.value == 2).classed('indef', true);\n    consts.imag = elements.filter(d => d.data.value == 3).classed('imag', true);\n\n    const unclear = elements.filter(d => d.data.type === 'unclear')\n        .classed('unclear', true);\n\n    const reChilds = forms.filter(d => d.data.reChild)\n        .classed('reChild', true);\n\n    const rePoints = elements.filter(d => d.data.type === 'reEntryPoint')\n        .classed('reEntryPoint', true);\n\n    return [leaves, sets, forms, reEntries, reChilds, rePoints, elements, vars, consts, unclear];\n}\n\nfunction resolveLinks(root, links) {\n    // resolves links between descendant nodes into filtered selections\n    const reChildLink = links.filter(d => d.target.data.reChild)\n        .classed('reChildLink', true);\n\n    const rePointLink = links.filter(d => d.target.data.type === 'reEntryPoint')\n        .classed('rePointLink', true);\n\n    return [reChildLink, rePointLink];\n}\n\nexport default class D3Graph {\n\n    constructor(graphType, data, opts, ...args) {\n        // create basic svg-structure from chartFactory and merge options with configuration\n        const proto = chartFactory( { \n            ...{ margin: { left: 50, right: 50, top: 50, bottom: 50 }, \n                padding: { left: 10, right: 10, top: 10, bottom: 10 },\n                styleClass: 'basic' },\n            ...opts\n        } );\n\n        // merge this graph with the chart structure\n        Object.assign(this, proto);\n        // calculate inner dimensions of the svg-chart\n        this.innerHeight = this.height - this.margin.top - this.margin.bottom - this.padding.top - this.padding.bottom;\n        this.innerWidth = this.width - this.margin.left - this.margin.right - this.padding.left - this.padding.right;\n\n        // call the appropriate method to build the graph\n        this.constructor[graphType].call(this, data, ...args);\n        //   this[graphType](data);\n        //   this[graphType].call(this, data, ...args);\n    }\n// (()())((()))((()))\n// (((c)(a)b))()()\n    static tree(data) {\n        const chart = this.container;\n        // create a d3-hierarchy from our form-json\n        const root = d3.hierarchy(data, d => d.space);\n\n        // set up design variables\n        const design = styles.tree[this.styleClass];\n        const [nodeSize, nodeSep] = [design.nodeSize, design.nodeSeparation];\n        const [fontSize, font] = [design.font.size, design.font.family];\n\n        root.dx = nodeSize.w + nodeSep.hz;\n        root.dy = this.width / (root.height + 1);\n\n        // define tree layout\n        const layout = d3.tree()\n            // .size([ this.innerWidth, // - this.padding.left , \n            //         this.innerHeight //- this.padding.top\n            //       ]);\n            .nodeSize([\n                root.dx,\n                root.dy\n            ]) // ([nodeSize.w + nodeSep.hz, nodeSize.h + nodeSep.vt])\n            .separation((a,b) => {\n                return a.parent == b.parent ? 1 : 2;\n            });\n        const tree = layout(root);\n\n        // compute min/max x-values\n        let x0 = Infinity;\n        let x1 = -x0;\n        tree.each(d => {\n            if (d.x > x1) x1 = d.x;\n            if (d.x < x0) x0 = d.x;\n        });\n        // compute new height based on the difference of min/max x-values of tree nodes + twice the padding\n        const rootUnmarked = root.data.unmarked;\n        const axisHeight = 30;\n        this.height = x1 - x0 + this.padding.top*2 + axisHeight;\n\n        // setup svg container\n        this.svg\n            .attr('width', this.width)\n            .attr('height', this.height); // + root.dx*2)\n            // .style('width', '100%')\n            // .style('height', 'auto');\n        styles.clearDefaults(this.svg); // clear default styles for svg export\n\n        // setup basic chart structure\n        chart\n            .classed('graph-tree', true)\n                .attr('transform', `translate(${this.padding.left + (root.data.unmarked ? -root.dy : 0)},${this.padding.top - x0})`);\n                // .attr('transform', `translate(${(root.data.unmarked ? -root.dy : 0)},${0})`);\n                // .attr('transform', () => {\n                //     if (root.data.unmarked) return `translate(${-root.dy},${0})`\n                // }); \n                // root.dy / 3\n                // .attr('transform', `translate(${0},${0})`);\n            // .attr('transform', `translate(${this.innerWidth/2},${0})`);\n            // .attr('transform', `translate(${this.padding.left},${this.padding.top})`);\n        \n        // add vertical axis lines for depth\n\n        const rootHeights = d3.range(root.height + (rootUnmarked ? 0:1));\n\n        this.depthScale = d3.scaleOrdinal()\n            .domain( rootHeights )\n            .range( rootHeights.map(i => (i+(rootUnmarked ? 1:0))*root.dy) );\n        \n        const depthAxis = d3.axisBottom()\n            .scale(this.depthScale)\n            .tickSizeInner(-this.height)\n            .tickSizeOuter(0)\n            .tickPadding(8)\n            .tickValues( this.depthScale.domain().map(i => \n                (this.depthScale.domain().length < 15) ? 'Depth '+i : i\n            ) );\n\n        const axis = chart.append('g')\n            .classed('depthAxis', true)\n            .attr('transform', `translate(0, ${x1 + this.padding.bottom})`)\n            .call(depthAxis);\n        axis.select('.domain').remove();\n        \n\n        // add groups for links and nodes\n\n        const links = chart.selectAll('.link')\n            .data(tree.links()) // tree.descendants().slice(1))\n            .enter().append('g')\n                .classed('link', true)\n\n        const nodes = chart.selectAll('.node')\n            .data(tree.descendants())\n            .enter().append('g')\n                .classed('node', true)\n                .attr('transform', d => `translate(${d.y},${d.x})`);\n\n        if (rootUnmarked) {\n            links.filter(d => d.source.depth === 0)\n                .remove();\n\n            nodes.filter(d => d.depth === 0)\n                .remove();\n        }\n\n        // generate link partition selections\n        const linkPartitions = resolveLinks(tree, links);\n        const [reChildLink, rePointLink] = linkPartitions;\n\n        // generate node partition selections\n        const nodePartitions = resolveNodes(tree, nodes);\n        const [leaves, sets, forms, reEntries, reChilds, rePoints, elements, vars, consts, unclear] = nodePartitions;\n\n        // curved line generator\n        const line = d3.line().curve(d3.curveBasis);\n\n        links\n            .append('path')\n                .attr('d', d3.linkHorizontal()\n                    .x(d => d.y)\n                    .y(d => d.x));\n            // .attr('d', d => line([\n            //     [d.target.x, d.target.y],\n            //     [d.target.x, (d.target.y + d.source.y) / 2],\n            //     [d.source.x, (d.target.y + d.source.y) / 2],\n            //     [d.source.x, d.source.y]],\n            //     ));\n\n        // nodes.filter(d => !d.data.unmarked)\n        //     // .filter(d => d.data.reChild)\n        nodes.filter(d => !d.data.unmarked)\n            .append('circle')\n            .attr('r', nodeSize.w/2)\n            // .attr('cx', d => d.x)\n            // .attr('cy', d => d.y);\n        // rePoints.selectAll('circle')\n        rePoints.append('text')\n            .attr('x', nodeSize.w/2 + 2)\n            .text(d => {\n                let p = d.parent;\n                let counter = 0;\n                while(p.data.type !== 'reEntry') {\n                    p = p.parent;\n                    if (counter > 1000) return null; // security\n                    counter++;\n                }\n                // const reEven = p.data.reEven ? 'even' : 'odd';\n                // return `${reEven} re-entry `;\n                return p.data.reEven ? '2|r|' : '2|r|+1';\n            });\n            // .attr('r', design.radiusSml);\n\n        elements.selectAll('circle')\n            .attr('r', (nodeSize.w/2)/2);\n\n        nodes\n            .append('text')\n            .attr('x', nodeSize.w/2 + 2)\n            // .attr('y', 5)\n        \n        vars.selectAll('text')\n            .call(textSubscript(d => d.data.symbol));\n            //.text(d => `${d.data.symbol}`);\n        consts.selectAll('text')\n            .text(d => `= ${d.data.value}`);\n        unclear.selectAll('text')\n            .text(d => `/${d.data.symbol}/`);\n\n        sets.filter(d => d.children)\n            .append('circle')\n            .classed('inner',true)\n            .attr('r', (nodeSize.w/2)/2);\n\n\n        // apply all style-related attributes to the selections\n        design.applyAxisStyles(axis);\n        design.applyLinkStyles(links, linkPartitions);\n        design.applyNodeStyles(nodes, nodePartitions);\n\n        // fitChart(chart, this.padding);\n\n        // chart.attr('transform', `translate(${chart.node().getBBox().width/2},${0})`);\n\n        // debugging:\n        [this.root, this.layout, this.chart, this.tree, this.design] = \n            [root, layout, chart, tree, design];\n    }\n\n    static pack(data) {\n        const chart = this.container;\n        // create a d3-hierarchy from our form-json\n        // data.forEach()\n        styles.clearDefaults(this.svg); // clear default styles for svg export\n\n        const root = d3.hierarchy(data, d => d.space)\n            .sum(d => d.children ? 0 : 1);\n\n        // set up design variables\n        const design = styles.pack[this.styleClass];\n        const [radius, padding] = [design.radius, design.padding];\n        const [fontSize, font] = [design.font.size, design.font.family];\n\n        // define pack layout\n        const layout = d3.pack()\n        .padding(d => {\n            let pad = padding;\n            if (d.data.type === 'form' && d.children.length === 1) {\n                if (d.children[0].data.type === 'form')\n                    pad = pad * 0.4;\n            }\n            if (d.data.unmarked && d.children.length === 1) pad = 0;\n            return pad;\n        })\n        .radius(d => {\n            let rad = radius;\n            if(typeof(d.data.symbol) === 'string') {\n                rad = textSize(d.data.symbol, fontSize, font).width /2;\n                if(d.data.type === 'unclear') rad += padding*2;\n            }\n            else if(d.data.value) {\n                rad = textSize(d.data.value+'', fontSize, font).width /2;\n            }\n            else if(d.data.children || d.data.type === 'reEntryPoint') rad = 0;\n            return rad;\n        });\n        // .size([ this.innerWidth, this.innerHeight ]);\n        const pack = layout(root);\n\n        // d3.select(chart.node().parentElement)\n        //     .attr('width', pack.r*2 + this.padding.left)\n        //     .attr('height', pack.r*2 + this.padding.top);\n\n\n        // setup basic chart structure\n        chart.attr('class', 'graph-pack')\n            .attr('transform', `translate(${pack.r + this.padding.left},${pack.r + this.padding.top})`);\n\n        const nodes = chart.selectAll('.node')\n            .data(pack.descendants())\n            .enter().append('g')\n                .classed('node', true)\n                .attr('transform', d => `translate(${d.x},${d.y})`);\n\n        // generate node partition selections\n        const nodePartitions = resolveNodes(pack, nodes);\n        const [leaves, sets, forms, reEntries, reChilds, rePoints, elements, vars, consts, unclear] = nodePartitions;\n\n        // define detailled structure/logic\n\n        sets.append('circle')\n            .attr('r', d => d.r);\n        // forms //.filter(d => !d.data.unmarked)\n        //     // .filter(d => d.data.reChild)\n        // reEntries //.filter(d => !d.data.lastOpen)\n        vars.append('text')\n            .call(textSubscript(d => d.data.symbol));\n\n        consts.append('text')\n            .text(d => d.data.value);\n\n        unclear.append('rect')\n            .attr('transform', d => \n            `skewX(-30) translate(${-(d.r - padding)},\n            ${-(textSize('x',fontSize, font).height + padding*2)/2})`)\n            .attr('width', d => d.r*2 - padding*2)\n            .attr('height', d => (textSize('x',fontSize, font).height + padding*2))\n        unclear.append('text')\n            .text(d => d.data.symbol);\n\n        rePoints\n            .append('circle')\n            .attr('r', 1.5);\n            // .attr('cx', -5)\n\n        reEntries\n            .call(circleLabel( d => d.data.reEven ? '2|r|' : '2|r|+1', design.fontContext.size, design.fontContext.family ));\n            // .append('text')\n            // .raise()\n            // .text(d => d.data.reEven ? '2|r|' : '2|r|+1');\n\n\n        // apply all style-related attributes to the selections\n        design.applyNodeStyles(nodes, nodePartitions, chart);\n\n        fitChart(chart, this.padding);\n\n        // debugging:\n        [this.root, this.layout, this.chart, this.pack, this.design] = \n            [root, layout, chart, pack, design];\n    }\n\n    static treemap(data) {\n\n    }\n\n    static force(data) {\n\n    }\n\n}\n\nexport const save = function(format, svg, name) {\n    // exports graphs into svg\n    \n    name = name ||d3.select(svg.parentNode).attr('id');\n    const timestamp = getTimestamp();\n\n\ttry {\n    switch(format) {\n      case 'svg':\n        saveSvg(svg, timestamp+'_'+name+'.svg');\n        break;\n    }\n\t} catch(e) {\n\t\tconsole.log(e);\n\t}\n}\n// export default graph;","import FForm from './fform';\nimport D3Graph, { save } from '../modules/d3-graph';\n\nlet g1 = {}; let g2 = {};\n\nexport default class FGraph extends FForm {\n    /*\n    =======================================================\n      'graph' module for formform (c) 2018 Peter Hofmann\n    =======================================================\n    */\n\n  constructor() {\n    // this.graphs = [];\n  };\n\n  // ----------------------------------------------------\n  // Extensions of FForm\n  // ----------------------------------------------------\n\n  static jsonString(form) {\n    const expandedForm = this.expand_reEntry(form);\n    return super.jsonString(expandedForm);\n  }\n\n  // static jsonString(form) {\n  //   // if(typeof(_form) === 'string') _form = this.parseLinear(_form);\n\n  //   const expandedForm = this.expand_reEntry(form);\n  //   return JSON.stringify(expandedForm, undefined, 2);\n  // }\n\n  // ----------------------------------------------------\n  // Graph representation\n  // ----------------------------------------------------\n\n  static createGraph(graphType, _form, options) {\n    // expand re-entry structure to be usable for graphs\n    const form = this.expand_reEntry(_form);\n    // initialize the graph\n\n    const graph = new D3Graph(graphType, form, options);\n    graph.formula = _form;\n    // graphs.push( new D3Graph(graphType, form, options) );\n\n    return graph;\n  }\n\n  static saveGraph(format, svg, name) {\n    save(format, svg, name);\n  }\n\n  static constructNested(reForm) {\n    /* Constructs a (real) nested form structure from the .nested array of the original re-entry json */\n    let space = reForm.space = [];\n    reForm.nested.reverse(); // MUST be reversed, because notation: {deepest, ..., shallowest}\n\n    for(let i in reForm.nested) {\n      if (i > 0) {\n        // prepend the reEntry nesting before everything else in the space\n        space.unshift( {type: 'form', reChild: true, space: []} ); // space.push <- order last\n        const nestedForm = space[0]; // space[space.length-1] <- order last\n        \n        if(!reForm.nested[i].unmarked) nestedForm.space.push(reForm.nested[i]);\n        // else nestedForm.space.push(reForm.nested[i]);\n        else nestedForm.space.push(...reForm.nested[i].space); // push(reForm.nested[i]) for grouping\n\n        space = nestedForm.space;\n      }\n      else {\n        if(!reForm.nested[i].unmarked) space.push(reForm.nested[i]);\n        // else space.push(reForm.nested[i]);\n        else space.push(...reForm.nested[i].space); // push(reForm.nested[i]) for grouping\n      }\n    }    \n\n    // we need to add a point of re-entry to the last nested form\n    // first, lets assume this is the form itself\n    let lastNested = reForm;\n    \n    if(reForm.space.length > 0) {\n      // then loop until the last reChild is found and make this our last nested form\n      \n      while (lastNested.space[0].hasOwnProperty('reChild')) {        \n        lastNested = lastNested.space[0];\n        if (lastNested.space.length < 1) break; // prevent errors when nothing is found\n      }\n    }\n    // for open re-entries, we need to add another nesting (see uFORM iFORM for reference)\n    if(reForm.lastOpen) {\n      lastNested.space.unshift( {type: 'form', reChild: true, space: []} );\n      // then add the re-entry point to either space\n      lastNested.space[0].space.unshift( {type: 'reEntryPoint'} );\n    }\n    else lastNested.space.unshift( {type: 'reEntryPoint'} );\n\n    // last, delete the nested structure, we don't need it anymore\n    delete reForm.nested;\n    return reForm;\n  }\n\n  static expand_reEntry(_form) {\n    if(typeof(_form) !== 'string') _form = JSON.stringify(_form);\n    const refForm = this.parseLinear(_form);\n    let targetForm = this.parseLinear(_form);\n\n    this.traverseForm(refForm, function(refBranch) {\n\n      if(refBranch.type === 'reEntry') {\n        \n        this.traverseForm(targetForm, function(targetBranch) {\n\n          if(JSON.stringify(refBranch) === JSON.stringify(targetBranch)) {\n            \n            targetBranch = this.constructNested(targetBranch);\n            return true;\n          }\n        });\n\n      }\n    });\n\n    return targetForm;\n  }\n\n\n}","import calc from './core/fcalc';\nimport form from './core/fform';\nimport graph from './core/fgraph';\n\n// export {FCalc as FCalc};\n// export {FForm as FForm};\n// export {FGraph as FGraph};\n\n// export default FGraph;\nexport default { calc, form, graph };"],"sourceRoot":""}