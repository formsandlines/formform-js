{"version":3,"sources":["webpack://formform/webpack/bootstrap","webpack://formform/external \"d3\"","webpack://formform/./src/lib/modules/d3-styles.scss?854c","webpack://formform/./src/lib/modules/d3-styles.scss","webpack://formform/./node_modules/css-loader/dist/runtime/api.js","webpack://formform/./node_modules/style-loader/lib/addStyles.js","webpack://formform/./node_modules/style-loader/lib/urls.js","webpack://formform/./src/lib/core/fcalc.js","webpack://formform/./src/common/helper.js","webpack://formform/./src/lib/core/fform.js","webpack://formform/./src/common/d3-helper.js","webpack://formform/./src/lib/modules/d3-styles.js","webpack://formform/./src/lib/modules/d3-graph.js","webpack://formform/./src/lib/core/fgraph.js","webpack://formform/./src/lib/main.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","d3","content","options","hmr","transform","insertInto","undefined","locals","push","useSourceMap","list","toString","this","map","item","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","source","sourceRoot","concat","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","length","id","fn","memo","stylesInDom","isOldIE","window","document","all","atob","apply","arguments","getElement","target","parent","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","e","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","domStyle","refs","j","parts","addStyle","listToStyles","newStyles","base","part","css","media","insertStyleElement","style","Error","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","before","removeStyleElement","parentNode","removeChild","idx","indexOf","splice","createStyleElement","createElement","attrs","type","nonce","nc","getNonce","addAttrs","el","keys","forEach","setAttribute","obj","update","remove","result","default","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","href","styleSheet","cssText","createTextNode","newObj","DEBUG","newList","mayRemove","textStore","replaceText","index","replacement","filter","Boolean","cssNode","childNodes","location","baseUrl","protocol","host","currentDir","pathname","replace","fullMatch","origUrl","newUrl","unquotedOrigUrl","trim","$1","test","FCalc","_classCallCheck","console","log","fx","fy","_len","fVals","Array","_key","val","rel_logic","inv_logic","fA","fB","altInterpr","reEntry","lastOpen","fC","fD","fE","reEven","resEven","zeros","firstUndef","iFORM","calcfrom","inv","repeat","iRev","case0","case1","cont","implL","implR","pre","post","pad","num","size","String","replaceAll","find","escapeMeta","RegExp","addBefore","substr","replaceAt","FForm","fform_classCallCheck","_possibleConstructorReturn","_this","form","parseLinear","space","calc","isNaN","nestedVals","fReEntry","nested","altInterpretation","unmarked","vars","getVariables","vals","interKey","interpr","var","a","interCalc","b","f","interpret","interprForm","parse","traverseForm","fBranch","depth","v","symbol","fform_typeof","_get","_getPrototypeOf","_get2","formula","jsonStr","convFromLinear","json","cleanFormula","cleanLinear","flatten","arr","reduce","flat","toFlatten","isArray","constructFromLinear","inQuote","inSlash","char","compAll","countDepth","slice","prevChar","comp","reParts","split","reNested","sort","func","breakTrav","protoChart","width","innerWidth","height","innerHeight","margin","left","right","top","bottom","getRealDepth","ghosts","ancestors","data","textSubscript","text","selection","each","append","attr","textSize","fontSize","fontFamily","fontStyle","container","node","getBBox","opacity","color","alpha","colorCopy","calcCircleDash","unit","fraction","_den","count","sign","den","Math","round","candidate","reduceRemainder","PI","circleDashArray","fractions","str","global","common","font","family","fontContext","ground","indef","light","dashes","basic","_objectSpread","gestalt","pos","neg","clearDefaults","svg","tree","nodeSize","w","h","nodeSeparation","hz","vt","applyAxisStyles","axis","selectAll","select","applyNodeStyles","nodes","nodePartitions","_nodePartitions","_slicedToArray","sets","forms","reEntries","reChilds","rePoints","elements","applyLinkStyles","links","linkPartitions","_linkPartitions","reChildLink","rePointLink","_nodePartitions2","pack","radius","padding","resolveNodes","root","leaves","pop","classed","consts","marked","imag","unclear","reChild","_nodePartitions3","invertFill","chart","_nodePartitions4","defs","grad_1","grad_2","openReEntries","D3Graph","graphType","opts","_this$constructor$gra","d3_graph_classCallCheck","proto","assign","parentId","lower","styleClass","chartFactory","d3_graph_objectSpread","args","constructor","design","_ref","nodeSep","dx","dy","layout","separation","x0","Infinity","x1","x","rootUnmarked","rootHeights","depthScale","domain","range","depthAxis","scale","tickSizeInner","tickSizeOuter","tickPadding","tickValues","enter","descendants","y","resolveLinks","d3_graph_slicedToArray","curve","counter","children","_ref3","sum","_ref4","_ref5","rad","textSz","raise","circleLabel","parentElement","fitChart","_ref6","save","format","date","Date","timestamp","getUTCFullYear","getUTCMonth","getUTCDate","getHours","getMinutes","getSeconds","svgEl","svgData","outerHTML","svgBlob","svgUrl","downloadLink","download","body","click","saveSvg","FGraph","fgraph_classCallCheck","fgraph_possibleConstructorReturn","expandedForm","expand_reEntry","fgraph_get","fgraph_getPrototypeOf","_form","graph","reForm","reverse","_nestedForm$space","unshift","nestedForm","_toConsumableArray","_space","lastNested","refForm","targetForm","refBranch","targetBranch","constructNested","__webpack_exports__","fform_FForm","fgraph_FGraph"],"mappings":"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","file":"formform.dist.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","module.exports = d3;","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../node_modules/sass-loader/lib/loader.js!./d3-styles.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../node_modules/sass-loader/lib/loader.js!./d3-styles.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../node_modules/sass-loader/lib/loader.js!./d3-styles.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"\", \"\"]);\n\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return '@media ' + item[2] + '{' + content + '}';\n      } else {\n        return content;\n      }\n    }).join('');\n  }; // import a list of modules into the list\n\n\n  list.i = function (modules, mediaQuery) {\n    if (typeof modules === 'string') {\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    for (var i = 0; i < this.length; i++) {\n      var id = this[i][0];\n\n      if (id != null) {\n        alreadyImportedModules[id] = true;\n      }\n    }\n\n    for (i = 0; i < modules.length; i++) {\n      var item = modules[i]; // skip already imported module\n      // this implementation is not 100% perfect for weird media query combinations\n      // when a module is imported multiple times with different media queries.\n      // I hope this will never occur (Hey this way we have smaller bundles)\n\n      if (item[0] == null || !alreadyImportedModules[item[0]]) {\n        if (mediaQuery && !item[2]) {\n          item[2] = mediaQuery;\n        } else if (mediaQuery) {\n          item[2] = '(' + item[2] + ') and (' + mediaQuery + ')';\n        }\n\n        list.push(item);\n      }\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || '';\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */';\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n  return '/*# ' + data + ' */';\n}","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","export default class FCalc {\n    /*\n    =======================================================\n          FORM CALCULATOR 1.6 by Peter Hofmann, 2018\n    =======================================================\n     For information/reference about FORMs, see\n     - \"uFORM iFORM\" by Ralf Peyn, 2017 (https://uformiform.info)\n       on undetermined and imaginary FORMs and how to calculate with them\n     - \"Laws of Form\" by George Spencer-Brown, 19692015\n       for complete reference on 2-valued FORM algebra and arithmetic\n    */\n    constructor() {\n    };\n\n    static test() {\n        console.log('worked');\n    }\n\n    static rel_logic(fx, fy) { // verified\n        /* FORM arithmetic for commutative relation: x y */\n        if ( fx > 3 || fx < 0 || fy > 3 || fy < 0 ) return -98;\n        else if ( fx === 0 || fy === 1 ) { \n            return fy; // C3 /Theorem 2\n        } \n        else if ( fy === 0 || fx === 1 ) { \n            return fx; // C3 /Theorem 2\n        }\n        else if ( fx === fy ) { \n            return fx; // C5 /Theorem 5\n        }\n        else if ( (fx === 2 && fy === 3) || (fx === 3 && fy === 2) ) { \n            return 1; // C2 /Theorem 13 + C3 /Theorem 2\n        }\n        return -99; // error code\n    };\n    static rel(...fVals) { // verified\n        /* Shortcut for relation with n variables: x_1 ... x_n */\n        // var fVals = Array.prototype.slice.call(arguments);\n        if (fVals.length > 1) {\n            var val = 0;\n            for (var i in fVals) {\n                val = this.rel_logic( val,fVals[i] );\n            }\n            return val;\n        }\n        return -97; // error code\n    };\n\n    static inv_logic(fx) { // verified\n        /* FORM arithmetic for inversion/negation: (x) */\n        switch (fx) {\n        case 0:\n            return 1;\n        case 1:\n            return 0;\n        case 2:\n            return 3;\n        case 3:\n            return 2;\n        }\n        return -99; // error code\n    };\n    static inv(fx, n) { // verified\n        /* Shortcut for n inversions/negations: (x) */\n        if (n > 0) {\n            var val = fx;\n            for (var i=0; i<n; i++) {\n                val = this.inv_logic(val);\n            }\n            return val;\n        }\n        else return this.inv_logic(fx);\n        return -97; // error code\n    };\n\n\n    // ---------------------------\n    //  RE-ENTRY FORM CALCULATION\n    // ---------------------------\n\n    static uForm2(fA, fB, altInterpr=false) { // calculation verified (both interpr.)\n        return this.reEntry(false, false, altInterpr, fA, fB);\n    };\n    static iForm2(fA, fB, altInterpr=false) { // calculation verified (both interpr.)\n        return this.reEntry(false, true, altInterpr, fA, fB);\n    };\n    static uForm3(lastOpen, fA, fB, fC, altInterpr=false) { // calculation verified closed & open (both interpr.)\n        return this.reEntry(true, lastOpen, altInterpr, fA, fB, fC);\n    };\n    static iForm3(lastOpen, fA, fB, fC, altInterpr=false) { // calculation verified closed & open (both interpr.)\n        return this.reEntry(false, lastOpen, altInterpr, fA, fB, fC);\n    };\n    static uForm4(fA, fB, fC, fD, altInterpr=false) {\n        return this.reEntry(false, false, altInterpr, fA, fB, fC, fD);\n    };\n    static iForm4(fA, fB, fC, fD, altInterpr=false) {\n        return this.reEntry(false, true, altInterpr, fA, fB, fC, fD);\n    };\n    static uForm5(lastOpen, fA, fB, fC, fD, fE, altInterpr=false) {\n        return this.reEntry(true, lastOpen, altInterpr, fA, fB, fC, fD, fE);\n    };\n    static iForm5(lastOpen, fA, fB, fC, fD, fE, altInterpr=false) {\n        return this.reEntry(false, lastOpen, altInterpr, fA, fB, fC, fD, fE);\n    };\n\n    // static reEntry(... vars) {\n    //     return this.reEntry(false, false, vars);\n    // }\n    // static reEntry(reEven, ... vars) {\n    //     return this.reEntry(reEven, false, vars);\n    // }\n\n    static reEntry(reEven, lastOpen, altInterpr, ...fVals) {\n        /* FORM arithmetic for different self-equivalent re-entry FORMs\n         [Arguments] reEven: even re-entry-number? | lastOpen: last variable not crossed? | fVals: variables (0/1/2/3)\n\n         Note: calculation manually verified for \n         - (uFORM a1, res2) =((x)y)\n         - (iFORM a2, res2) ()=(a1x)y\n         - (iFORM b1, res3) [2|r|+1] ()=(((x)y)z) =((((((x)y)z)x)y)z)\n         - (iFORM b2, res3) [2|r|+1] ()=((b1x)y)z\n         - (uFORM c1, res3) [2|r|] =((((((x)y)z)x)y)z)\n         - (uFORM c2, res3) [2|r|] ()=((c1x)y)z\n         Should work with resolutions of 4, 5,  but needs verification.\n\n         My basic observations about self-equivalent re-entry FORMs:\n         - Every re-entry FORM needs to have an even number of crosses to be self-equivalent (uFORM):  = ((1)2) .\n           So with uneven resolutions, we always need to have an even re-entry number:  = ((((((1)2)3)1)2)3) .\n         - To be able to also have uneven re-entry numbers, either the resolution needs to be even\n           or we have to embed the re-entry FORM into a normal FORM that is one re-entry of that FORM:\n           () = (((1)2)3) <-> (((  = ((((((1)2)3)1)2)3) 1)2)3) .\n           These compositional re-entry FORMs are iFORMs, since they resolve to: (  = (()) ) .\n         - If the outmost cross of the FORM should be left out (open FORMs), this can only be done if we embed\n           a corresponding closed FORM of itself that either is or embeds its re-entry FORM (cases described above).\n           I believe the outmost (open) FORM is not being counted as a re-entry at all, since it's missing a cross.\n\n         This algorithm is based on the following rules/patterns/observations derived from \"uFORM iFORM\":\n         [1] If 1 is somewhere in the FORM, it will dominate all values in spaces deeper than m,\n             so the re-entry is obsolete and we can start calculate from this space. \n         [2] If there are 3/2 or 2/3 pairs in the FORM, the first term can be turned into 1, since\n             through C2 the second term can always be generated into its space, where 23 = 1.\n             Then we can proceed as in (1).\n         [3] If all variables are 0, we will have either a uFORM or iFORM, hence the value of the\n             FORM will be either 2 or 3, depending on the following cases:\n             - 2: closed,      resolution even, re-entry-number even/odd (a1)\n             - 2: closed/open, resolution odd,  re-entry-number even     (c1, c2)\n             - 3: open,        resolution even, re-entry-number even/odd (a2)\n             - 3: closed/open, resolution odd,  re-entry-number odd      (b1, b2)\n         Since [1][2][3] eliminate all other cases, all variables are now either 2 or 3 (and maybe 0s),\n         so using C2 as described above, only the last occasion of these variables need to be considered:\n         [4] If we use uFORM iFORM interpretation 2 (p.167) recursive identity ( mn <-> (())= ), C2 and C1\n              can be separated from 2/3 if there is an even number of crosses (or none) after the variable.\n             Then, depending on the FORM, we have either:\n             iFORM: (=(())) 2/3 <-> (2) 2/3  or\n             uFORM:  =(()) 2/3  <->  2 2/3\n         [5] If [4] does not apply or we decide for uFORM iFORM interpretation 1 (p.167): recursion instruction \n             ( mn -> =(()) ), we will have either variables of 2 or 3 which we cannot relate to , since\n             they need not be the same undetermined value. Using case distinction, we interpret the\n             last occasion of 2 or 3 as 0 and as 1, calculate everything with =2 and relate the results \n             using contravalence: ((x)y)((y)x) which yields the final result.\n        */\n        // check if arguments are actually defined\n        if (reEven === undefined) {\n            reEven = false;\n        }\n        if (lastOpen === undefined) {\n            lastOpen = false;\n        }\n\n        var resEven = (fVals.length%2 == 0); // even resolution?\n        var zeros = 0; // zero counter\n        var firstUndef = -1; // catches first mn/(mn)\n\n        // [3] determine if uFORM or iFORM\n        var uFORM = false;\n        var iFORM = false;\n        if (resEven) {\n            if (lastOpen) iFORM = true;\n            else uFORM = true;\n        }\n        else {\n            if (reEven) uFORM = true;\n            else iFORM = true;\n        }\n      \n        // check if there is 1/m somewhere in x_1  x_n\n        var calcfrom = -1;\n        for(var i=0; i<fVals.length; i++) {\n            var fx = fVals[i]; \n\n            if (fx == 1) {\n                calcfrom = i; // [1] if m is somewhere, set calculation start from there\n                break;\n            }\n            else if (fx == 0) zeros++; // [3] keep track of how many zeros there are\n            else if (fx == 2 || fx == 3) { // [2]\n                if(firstUndef == -1) firstUndef = i; // if there is a first 2/u or 3/i, remember\n                else if(fx != fVals[firstUndef]) {\n                    calcfrom = firstUndef; // if 3/2 or 2/3 pairs, set calculation form first undef. value\n                    break;\n                }\n            }\n        }\n      \n        if (zeros == fVals.length) {\n            // [3] in case all variables are n, just return the undefined/imaginary value of the FORM\n            if (iFORM) return 3;\n            else return 2;\n        }\n        if (calcfrom >= 0) {\n            // [1|2] if there is a 1/m somewhere in the form, we can easily calculate the rest from this point\n            var val = 1;\n            for(var i=calcfrom; i<fVals.length; i++) {      \n                if (lastOpen && i == fVals.length-1) {\n                    val = this.rel(val,fVals[i]); // if no cross on last var, don't invert\n                }\n                else val = this.inv( this.rel(val,fVals[i]) );\n            }\n            return val;\n        }\n      \n        // what remains, will only be either\n        // - (1) all variables are n/0 or mn/2   or\n        // - (2) all variables are n/0 or (mn)/3\n        // So we calculate from the last occasion of 2 or 3, because with C2 (degenerate) all else can be ignored\n\n        // for even closed re-entry-FORMs with uneven resolution (uFORM c1), we need to do the calculation twice\n        var repeat = (reEven && !resEven && !lastOpen)? 2:1;\n      \n        for(var i=(fVals.length*repeat)-1; i>=0; i--) {\n            var index = i%fVals.length; // repeated variable index\n\n            if (fVals[index] == 2 || fVals[index] == 3) {\n                var iRev = (fVals.length*repeat)-1 - i; // reverse index to easier check for interpretation 2 (see next)\n\n                if (altInterpr && ((lastOpen && iRev%2==0) || (!lastOpen && iRev%2==1))) {\n                    // uFORM iFORM interpretation 2: recursive identity ( =(()) <-> mn )\n                    // =(()) can be separated if there is an even number of crosses (or none) after the variable; this is the case if either:\n                    // - (1) the FORM is open and the backwards variable index is even      or\n                    // - (2) the FORM is closed and the backwards variable index is odd\n\n                    // to determine if the number of crosses between  and our var is even, we distinguish two cases:\n                    if (iFORM) return this.rel(3,fVals[index]); // iFORM: (=(()))x <-> (mn) x\n                    else return this.rel(2,fVals[index]);       // uFORM:  =(())x  <->  mn x\n                }\n                else {\n                    // [5] if everything else fails, use case distinction: uFORM iFORM (p.94); also according to:\n                    // uFORM iFORM (p.167) interpretation 1: recursion instruction ( =(()) and mn need to be differentiated)\n\n                    var case0 = 2; // re-entry =mn, because other mn=0\n                    if (lastOpen && !resEven && !reEven) case0 = this.inv(case0); // cross for integrated FORMs with uneven res. inside open FORMs (iFORM b2)\n                    for(var j=0; j<(fVals.length*repeat); j++) {\n                        var fx = 0; // all other values will be (degenerated to) zero\n                        if (j == i) {\n                            if(fVals[index] == 2) fx = 0; // last occasion of mn/2 will be interpreted as 0\n                            else fx = this.inv(0); // last occasion of (mn)/3 will be interpreted as (0)\n                        }\n                        if (lastOpen && j == fVals.length-1) case0 = this.rel(case0,fx); // if no cross on last var, don't invert\n                        else case0 = this.inv( this.rel(case0,fx) );\n                    }\n                    var case1 = 2; // re-entry =mn, because other mn=1\n                    if (lastOpen && !resEven && !reEven) case1 = this.inv(case1); // cross for integrated FORMs with uneven res. inside open FORMs (iFORM b2)\n                    for(var j=0; j<(fVals.length*repeat); j++) {\n                        var fx = 0; // all other values will be (degenerated to) zero\n                        if (j == i) {\n                            if(fVals[index] == 2) fx = 1; // last occasion of mn/2 will be interpreted as 1\n                            else fx = this.inv(1); // last occasion of (mn)/3 will be interpreted as (1)\n                        }\n                        if (lastOpen && j == fVals.length-1) case1 = this.rel(case1,fx); // if no cross on last var, don't invert\n                        else case1 = this.inv( this.rel(case1,fx) );\n                    }\n\n                    return this.cont( case0,case1 ); // contravalence of both cases\n                }\n\n            }\n        }\n      return -99; // error code\n    }; // end reEntry()\n\n\n    // ---------------------------\n    //  COMPLEX FORM CALCULATIONS\n    // ---------------------------\n\n    // - 2 VARIABLES\n\n    static implL(fx, fy) { // verified\n        /* FORM arithmetic for \"implication\": (x)y */\n        return this.rel( this.inv(fx),fy );\n    };\n    static implR(fx, fy) {\n        /* FORM arithmetic for \"implication\": x(y) */\n        return this.rel( fx,this.inv(fy) );\n    };\n\n    static pre(fx, fy) { // verified\n        /* FORM arithmetic for \"presection\"/\"decision\": ((x)y) */\n        return this.inv( this.implL(fx,fy) );\n    };\n    static post(fx, fy) { // verified\n        /* FORM arithmetic for \"postsection\"/\"decision\": (x(y)) */\n        return this.inv( this.implR(fx,fy) );\n    };\n\n    static cont(fx, fy) { // verified\n        /* FORM arithmetic for \"contravalence\"/\"either-or\": ((x)y) (x(y)) */\n        return this.rel( this.pre(fx,fy), this.post(fx,fy) );\n    };\n    static equiv(fx, fy) {\n        /* FORM arithmetic for \"equivalence\"/?: ( ((x)y) (x(y)) ) */\n        return this.inv( this.cont(fx,fy) );\n    };\n\n}","import * as d3 from 'd3';\n\n// ------------------------\n// jQuery replacements:\n\nexport function showAll(elems) {\n    if(typeof(elems) === 'string') elems = document.querySelectorAll(elems);\n    elems.forEach( (e,i) => {\n        show(e);\n    });\n}\nexport function show(elem) {\n    if(typeof(elem) === 'string') elem = document.querySelector(elem);\n    elem.classList.remove('d-none');\n    // elem.classList.add('is-visible');\n};\n\nexport function hideAll(elems) {\n    if(typeof(elems) === 'string') elems = document.querySelectorAll(elems);\n    elems.forEach( (e,i) => {\n        hide(e);\n    });\n}\nexport function hide(elem) {\n    if(typeof(elem) === 'string') elem = document.querySelector(elem);\n    elem.classList.add('d-none');\n\t// elem.classList.remove('is-visible');\n};\n\nexport function toggleAll(elems) {\n    if(typeof(elems) === 'string') elems = document.querySelectorAll(elems);\n    elems.forEach( (e,i) => {\n        toggle(e);\n    });\n}\nexport function toggle(elem) {\n    if(typeof(elem) === 'string') elem = document.querySelector(elem);\n    elem.classList.toggle('d-none');\n\t// elem.classList.toggle('is-visible');\n};\n\nexport function isVisible(elem) {\n    if(typeof(elem) === 'string') elem = document.querySelector(elem);\n    return ( !elem.classList.contains('d-none') );\n}\n// ------------------------\n\nexport function pad(num, size) {\n    /* Source: https://stackoverflow.com/a/2998822\n    Credits to: InfinitiesLoop */\n    var s = num+\"\";\n    while (s.length < size) s = \"0\" + s;\n    return s;\n}\n\nexport function saveSvg(svgEl, name) {\n    /* Source: https://stackoverflow.com/a/46403589\n    Credits to: defghi1977, DaveTheScientist, senz */\n    svgEl.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\");\n    var svgData = svgEl.outerHTML;\n    var preface = '<?xml version=\"1.0\" standalone=\"no\"?>\\r\\n';\n    var svgBlob = new Blob([preface, svgData], {type:\"image/svg+xml;charset=utf-8\"});\n    var svgUrl = URL.createObjectURL(svgBlob);\n    var downloadLink = document.createElement(\"a\");\n    downloadLink.href = svgUrl;\n    downloadLink.download = name;\n    document.body.appendChild(downloadLink);\n    downloadLink.click();\n    document.body.removeChild(downloadLink);\n}\n\nexport function flatten(arr) {\n    /* Source: https://stackoverflow.com/a/15030117 \n    Credits to: Noah Freitas */\n  return arr.reduce(function (flat, toFlatten) {\n    return flat.concat(Array.isArray(toFlatten) ? flatten(toFlatten) : toFlatten);\n  }, []);\n}\n\nexport function include(arr,obj) {\n    /*  Source: https://stackoverflow.com/a/143863\n    Credits to: Vinko Vrsalovic */\n    return (arr.indexOf(obj) != -1);\n}\n\nexport function traverse(o,func) {\n    /*  Source: https://stackoverflow.com/questions/722668/traverse-all-the-nodes-of-a-json-object-tree-with-javascript \n    Credits to: TheHippo */\n    for (var i in o) {\n        func.apply(null,[i,o[i]]);  // null or this?\n        if (o[i] !== null && typeof(o[i])==\"object\") {\n            //going one step down in the object tree!!\n            traverse(o[i],func);\n        }\n    }\n}\nString.prototype.replaceAll = function(find, replace, escapeMeta) {\n    /*  Modified from: https://stackoverflow.com/questions/1144783/how-to-replace-all-occurrences-of-a-string-in-javascript \n    Credits to: Sean Bright */\n    if(escapeMeta) find = escapeRegExp(find);\n    return this.replace(new RegExp(find, 'g'), replace);\n};\nexport function escapeRegExp(str) {\n    return str.replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\");\n}\nString.prototype.addBefore=function(index, replacement) {\n    return this.substr(0, index) + replacement+ this.substr(index);\n}\n\nexport function map(value, start1, stop1, start2, stop2) {\n    // Processing-like map function\n    return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nexport function arrayMoveItem(arr, from, to) {\n  arr.splice(to, 0, arr.splice(from, 1)[0]);\n}\n\nString.prototype.replaceAt=function(index, replacement) {\n    return this.substr(0, index) + replacement+ this.substr(index + replacement.length);\n}\n","import { flatten, include } from '../../common/helper';\nimport FCalc from './fcalc';\n\nexport default class FForm extends FCalc {\n    /*\n    =======================================================\n          FORM FORM alpha 1.0 by Peter Hofmann, 2018\n    =======================================================\n     Extension of FORM Calculator to make use of my jsonFORM format\n    */\n\n    // Ideas for implementation:\n    // - Schema-Notation: [name|a,b,] ex.: [uFORM3open|b,c,[cont|{2r|a,c},(b)]]\n\n    constructor() {\n    };\n\n    // ----------------------------------------------------\n    // Form Calculation\n    // ----------------------------------------------------\n\n    static calc(form) {\n        /* recursive form calculation */\n        var fx = 0;\n        // make sure to have a json form, if not: try to convert\n        if(typeof(form) === 'string') form = this.parseLinear(form);\n\n        for (var i in form.space) {\n            if (form.space[i].type === 'form') {\n                fx = this.rel( fx,this.calc(form.space[i]) );\n            }\n            else if (form.space[i].type === 'const') {\n                fx = this.rel( fx,form.space[i].value );\n            }\n            else if (form.space[i].type === 'var') {\n                if(!isNaN(form.space[i].value)) fx = this.rel( fx,form.space[i].value );\n            }\n            else if (form.space[i].type === 'unclear') {\n                fx = this.rel( fx,form.space[i].value );\n            }\n            else if (form.space[i].type === 'reEntry') {\n                var nestedVals = [];\n                var fReEntry = form.space[i];\n\n                for (var j in fReEntry.nested) {\n                    nestedVals.push( this.calc(fReEntry.nested[j]) );\n                }\n                \n                // notation reading: {deepest, ..., shallowest}  use nestedVals.reverse() to reverse variables\n                fx = this.rel( fx,this.reEntry(fReEntry.reEven, fReEntry.lastOpen, fReEntry.altInterpretation, ...nestedVals) );\n            }\n        }\n        if(form.unmarked) return fx;\n        else return this.inv( fx );\n    };\n\n    static calcAll(form) {\n        /* Interpret and calculate all possible values for the form */\n\n        // make sure to have a json form, if not: try to convert\n        if(typeof(form) === 'string') form = this.parseLinear(form);\n\n        var vars = this.getVariables(form);\n        var vals = {};\n\n        var interKey = ''+vars.join()+';';\n\n        switch (vars.length) {\n            case 0:\n                vals['Result'] = this.calc(form);\n                break;\n            case 1:\n                var interpr = [ {var: vars[0], value: null} ];\n                for (var a=0; a<4; a++) {\n                    interpr[0].value = a;\n                    vals[interKey+a] = this.interCalc(form, interpr);//[a]);\n                }\n                break;\n            case 2:\n                var interpr = [ {var: vars[0], value: null}, \n                                {var: vars[1], value: null} ];\n                for (var a=0; a<4; a++) {\n                    interpr[0].value = a;\n                    for (var b=0; b<4; b++) {\n                        interpr[1].value = b;\n                        vals[interKey+a+''+b] = this.interCalc(form, interpr);//[a,b]);\n                    }\n                }\n                break;\n            case 3:\n                var interpr = [ {var: vars[0], value: null}, \n                                {var: vars[1], value: null},\n                                {var: vars[2], value: null} ];\n                for (var a=0; a<4; a++) {\n                    interpr[0].value = a;\n                    for (var b=0; b<4; b++) {\n                        interpr[1].value = b;\n                        for (var c=0; c<4; c++) {\n                            interpr[2].value = c;\n                            vals[interKey+a+''+b+''+c] = this.interCalc(form, interpr);//[a,b,c]);\n                        }\n                    }\n                }\n                break;\n            case 4:\n                var interpr = [ {var: vars[0], value: null}, \n                                {var: vars[1], value: null},\n                                {var: vars[2], value: null},\n                                {var: vars[3], value: null} ];\n                for (var a=0; a<4; a++) {\n                    interpr[0].value = a;\n                    for (var b=0; b<4; b++) {\n                        interpr[1].value = b;\n                        for (var c=0; c<4; c++) {\n                            interpr[2].value = c;\n                            for (var d=0; d<4; d++) {\n                                interpr[3].value = d;\n                                vals[interKey+a+''+b+''+c+''+d] = this.interCalc(form, interpr);//[a,b,c,d]);\n                            }\n                        }\n                    }\n                }\n                break;\n            case 5:\n                var interpr = [ {var: vars[0], value: null}, \n                                {var: vars[1], value: null},\n                                {var: vars[2], value: null},\n                                {var: vars[3], value: null},\n                                {var: vars[4], value: null} ];\n                for (var a=0; a<4; a++) {\n                    interpr[0].value = a;\n                    for (var b=0; b<4; b++) {\n                        interpr[1].value = b;\n                        for (var c=0; c<4; c++) {\n                            interpr[2].value = c;\n                            for (var d=0; d<4; d++) {\n                                interpr[3].value = d;\n                                for (var e=0; e<4; e++) {\n                                    interpr[4].value = e;\n                                    vals[interKey+a+''+b+''+c+''+d+''+e] = this.interCalc(form, interpr);//[a,b,c,d,e]);\n                                }\n                            }\n                        }\n                    }\n                }\n                break;\n            case 6:\n                var interpr = [ {var: vars[0], value: null}, \n                                {var: vars[1], value: null},\n                                {var: vars[2], value: null},\n                                {var: vars[3], value: null},\n                                {var: vars[4], value: null},\n                                {var: vars[5], value: null} ];\n                for (var a=0; a<4; a++) {\n                    interpr[0].value = a;\n                    for (var b=0; b<4; b++) {\n                        interpr[1].value = b;\n                        for (var c=0; c<4; c++) {\n                            interpr[2].value = c;\n                            for (var d=0; d<4; d++) {\n                                interpr[3].value = d;\n                                for (var e=0; e<4; e++) {\n                                    interpr[4].value = e;\n                                    for (var f=0; f<4; f++) {\n                                        interpr[5].value = f;\n                                        vals[interKey+a+''+b+''+c+''+d+''+e+''+f] = this.interCalc(form, interpr);//[a,b,c,d,e,f]);\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n                break;\n        }\n        return vals;\n    };\n\n    static interCalc(form, interpr) {\n        return this.calc( this.interpret(form, interpr) );\n    };\n\n    static interpret(form, interpr) {\n        // make sure to have a json form, if not: try to convert\n        if(typeof(form) === 'string') form = this.parseLinear(form);\n\n        var interprForm = JSON.parse(JSON.stringify(form)); // clone form\n\n        this.traverseForm(interprForm, function(fBranch,depth,space) {\n\n            for (var i in space) {\n                if (space[i].type === 'var') {\n                    for (var v in interpr) {\n                        if (space[i].symbol === interpr[v].var) {\n\n                            space[i].value = interpr[v].value;\n                            break;\n                        }\n                    }\n                    // if(!isNaN(space[i].value)) {\n                    //     space[i].type = 'const';\n                    // }\n                }\n            }\n        });\n\n        return interprForm;\n    };\n\n    // ----------------------------------------------------\n    // Extensions of FCalc\n    // ----------------------------------------------------\n\n    static rel_logic(fx, fy) {\n        if(typeof(fx) === Array || typeof(fy) === Array) {\n            return null;\n        }\n        return super.rel_logic(fx, fy);\n    };\n    static rel(...fVals) {\n        return super.rel(...fVals);\n    };\n\n    static inv_logic(fx) {\n        if(typeof(fx) === Array) {\n            return null;\n        }\n        return super.inv_logic(fx);\n    };\n    static inv(fx, n) {\n        return super.inv(fx, n);\n    };\n\n    // ----------------------------------------------------\n    // Conversions\n    // ----------------------------------------------------\n\n    static parseLinear(formula) {\n        /* Converts from paranthesis notation into JSON string and parses as JSON object */\n\n        // convert the formula into a JSON string\n        var jsonStr = this.convFromLinear(formula);\n\n        // console.log(jsonStr);\n\n        // try parsing the string as a JSON object\n        var json = null;\n        try {\n            var json = JSON.parse(jsonStr); // $.parseJSON(jsonStr);\n        } catch(e) {\n            console.log(e);\n        }\n\n        return json;\n    }\n\n    static convFromLinear(formula) {\n        // clean formula string from whitespace\n        var cleanFormula = this.cleanLinear(formula);\n        var arr = this.constructFromLinear(cleanFormula);\n        return flatten(arr).join('');\n    }\n\n    static cleanLinear(formula) {\n        var cleanFormula = '';\n        var inQuote = false;\n        var inSlash = false;\n\n        for (var i in formula) {\n            var char = formula[i];\n            if(typeof(char) !== \"string\") break; // prototype hacks\n\n            if (char === '\"' && !inSlash) inQuote = !inQuote;\n            if (char === '/' && !inQuote) inSlash = !inSlash;\n\n            // omit whitespace outside of quotes\n            if (char === ' ') {\n                if (inQuote ||inSlash) cleanFormula += char;\n            }\n            else cleanFormula += char;\n        }\n        return cleanFormula;\n    }\n\n    static constructFromLinear(formula) {\n        /* Converts from paranthesis notation to JSON-form */\n\n        var compAll = [];\n        var unmarked = true;\n\n        // check for all enclosing outer form\n        var countDepth = 0;\n        var inQuote = false;\n        var inSlash = false;\n        var outerMarkCount = 0;\n        for (var i in formula) {\n            var char = formula[i];\n            if(typeof(char) !== \"string\") break; // prototype hacks\n            // console.log(char);\n            if (!inQuote && !inSlash) {\n                if (char === '(') {\n                    if ((countDepth == 0) && (i != 0)) break;\n                    countDepth++;\n                }\n                else if (char === ')') {\n                    countDepth--;\n                    if (countDepth == 0) {\n                        if (i == formula.length-1) {\n                            unmarked = false;\n                            break;\n                        }\n                        else break;\n                    }\n                }\n            }\n            if (char === '\"' && !inSlash) inQuote = !inQuote;\n            if (char === '/' && !inQuote) inSlash = !inSlash;\n        }\n\n        compAll.push('  {');\n        compAll.push('\"type\":\"form\",');\n\n        if (unmarked) compAll.push('\"unmarked\":true,');\n        else formula = formula.slice(1,formula.length-1);\n\n        compAll.push('\"space\":[');   \n\n\n        var parts = [];\n        parts.push('');\n\n        var countDepth = 0;\n        var inQuote = false;\n        var inSlash = false;\n\n        var optChar = '';\n        var nestChar = '';\n\n        for (var i in formula) {\n            var char = formula[i];\n            var prevChar = formula[i-1];\n            if(typeof(char) !== \"string\") break; // prototype hacks\n            // console.log(char);\n            if (!inQuote && !inSlash) {\n                if (char === ')' ||char === '}') countDepth--;\n                if (char === '(' ||char === '{') {\n                    // console.log(countDepth);\n                    if (countDepth === 0) {\n                        // first (x) doesn't need to be separated\n                        if (i > 0) parts.push('');\n                    }\n                    countDepth++;\n                }\n                else if ( (prevChar === ')' ||prevChar === '}') && !(char === ')' ||char === '}') ) {\n                    // console.log(countDepth);\n                    // if char follows (x), separate; but not if it is another ')'\n                    if (countDepth === 0) parts.push('');\n                }\n                // unique separation chars for re-entry forms for easy splitting\n                if (countDepth === 1 && char === ',') char = nestChar;\n                else if (countDepth === 1 && char === '|') char = optChar;\n                // console.log(countDepth + ': ' + char);\n            }\n            if (char === '\"' && !inSlash) inQuote = !inQuote;\n            if (char === '/' && !inQuote) inSlash = !inSlash;\n            // console.log(countDepth);\n            // add char to the latest pushed part\n            parts[parts.length-1] += char;\n        }\n\n\n        \n        for (var i in parts) {\n\n            if (parts[i][0] === '(') { \n                // if part is form\n                // parts[i] = this.constructFromLinear( parts[i].slice(1,parts[i].length-1) );\n                var comp = [];\n                // comp.push('{');\n                comp.push( this.constructFromLinear(parts[i]) );\n                // comp.push('}');\n\n                parts[i] = comp.slice();\n            }\n            else if (parts[i][0] === '{') {\n                // else if part is re-entry form\n\n                var comp = [];\n                comp.push('  {');\n                comp.push('\"type\":\"reEntry\",');\n\n                var content = parts[i].slice(1,parts[i].length-1);\n\n                var reParts = content.split(optChar);\n\n                if (reParts[0] === '2r' || reParts[1] === '2r' || reParts[2] === '2r') comp.push('\"reEven\":true,');\n                else comp.push('\"reEven\":false,');\n\n                if (reParts[0] === 'open' || reParts[1] === 'open' || reParts[2] === 'open') comp.push('\"lastOpen\":true,');\n                else comp.push('\"lastOpen\":false,');\n\n                if (reParts[0] === 'alt' || reParts[1] === 'alt' || reParts[2] === 'alt') comp.push('\"altInterpretation\":true,');\n                else comp.push('\"altInterpretation\":false,');\n\n                var reNested = reParts[reParts.length-1].split(nestChar);\n\n                // console.log(reParts[reParts.length-1]);\n                // console.log(reNested);\n\n                comp.push('\"nested\":[');\n\n                for (var n in reNested) {\n                    comp.push( this.constructFromLinear(reNested[n]) );\n                    if (n < reNested.length-1) comp.push(',');\n                    // reNested[n] = this.constructFromLinear( reNested[n] );\n                }\n\n                comp.push(']}  ');\n\n                parts[i] = comp.slice();\n            }\n            else {\n                // else we have variables/constants\n\n                var comp = [];\n\n                var vars = [];\n                var inQuote = false;\n                var inSlash = false;\n\n                for (var j in parts[i]) {\n                    var char = parts[i][j];\n                    if(typeof(char) !== \"string\") break; // prototype hacks\n\n                    if (char === '\"' && !inSlash) {\n                        inQuote = !inQuote;\n                        // mark quoted string with a '' for identification\n                        if (inQuote) vars.push('');\n                    }\n                    else if (char === '/' && !inQuote) {\n                        inSlash = !inSlash;\n                        // mark unclear form with a '' for identification\n                        if (inSlash) vars.push('');\n                    }\n                    else {\n                        if (!inQuote && !inSlash) vars.push('');\n                        // quote chars inside slashes will be escaped to not interfere with JSON syntax\n                        if (char === '\"' && inSlash) vars[vars.length-1] += '\\\\' + char;\n                        else vars[vars.length-1] += char;\n                    }\n                }\n\n                for (var v in vars) {\n                    if(typeof(vars[v]) !== \"string\") break; // prototype hacks\n\n                    comp.push('  {');\n                    if (!isNaN(vars[v]) && vars[v].length > 0 \n                        && vars[v][0] !== '' && vars[v][0] !== '') {\n                        comp.push('\"type\":\"const\",'); \n                        comp.push('\"value\":');\n                        comp.push(vars[v]);\n                    }\n                    else if (vars[v][0] === '') {\n                        comp.push('\"type\":\"unclear\",');\n                        comp.push('\"value\":2,');\n                        comp.push('\"symbol\":');\n                        comp.push('\"'+vars[v].slice(1)+'\"');\n                    }\n                    else {\n                        comp.push('\"type\":\"var\",');\n                        comp.push('\"value\":\"*\",');\n                        comp.push('\"symbol\":');\n                        if(vars[v][0] === '') comp.push('\"'+vars[v].slice(1)+'\"');\n                        else comp.push('\"'+vars[v]+'\"');\n                    }\n                    comp.push('}  ');\n                    if (v < vars.length-1) comp.push(',');\n                }\n\n                parts[i] = comp.slice();\n            } // end else\n\n            compAll.push(parts[i]);\n            if (i < parts.length-1) compAll.push(',');\n        }\n\n        compAll.push(']}  ');\n\n        return compAll;\n    }\n\n    // ----------------------------------------------------\n    // Representation\n    // ----------------------------------------------------\n\n    static jsonString(form) {\n        /* return json-representation of the specified FORM */\n        if(typeof(form) === 'string') form = this.parseLinear(form);\n    \n        return JSON.stringify(form, undefined, 2);\n    }\n\n    // ----------------------------------------------------\n    // Helper\n    // ----------------------------------------------------\n\n    static getVariables(form) {\n        if(typeof(form) === 'string') form = this.parseLinear(form);\n\n        var vars = [];\n        this.traverseForm(form, function(fBranch,depth,space) {\n\n            for (var i in space) {\n                if (space[i].type === 'var') {\n                    if (!include(vars, space[i].symbol)) {\n                        vars.push(space[i].symbol);\n                    }\n                }\n            }\n        });\n        return vars.sort();\n    };\n\n    static traverseForm(form,func) {\n        /* traverses only form-types in a json tree */\n        let breakTrav = func.apply(this,[form,form.depth,form.space]);\n\n        if (form.space) { // form.type === 'form'\n            if (form.space.length > 0) {\n                for (var i in form.space) {\n                    if (form.space[i].type === 'form' || form.space[i].type === 'reEntry') {\n                        let breakLoop = this.traverseForm(form.space[i],func);\n                        if (breakLoop) break;\n                    }\n                }\n            }\n        }\n        else if (form.nested) { // form.type === 'reEntry'\n            if (form.nested.length > 0) {\n                for (var i in form.nested) {\n                    let breakLoop = this.traverseForm(form.nested[i],func);\n                    if (breakLoop) break;\n                }\n            }\n        }\n        else console.log('ERROR: Not a form!');\n\n        return breakTrav;\n    };\n\n}","import * as d3 from 'd3';\n\nconst protoChart = {\n    width: window.innerWidth,\n    height: window.innerHeight,\n    margin: {\n      left: 10,\n      right: 10,\n      top: 10,\n      bottom: 10,\n    },\n  };\n  \nexport default function chartFactory(opts, proto = protoChart) {\n\n  const chart = Object.assign({}, proto, opts);\n  if(opts.parentId) chart.parent = d3.select(`#${opts.parentId}`);\n  else d3.select('body');\n\n  chart.svg = chart.parent\n    .append('svg').lower()\n    .attr('id', chart.id || 'chart')\n    .attr('width', chart.width - chart.margin.right)\n    .attr('height', chart.height - chart.margin.bottom);\n\n  if (opts.styleClass) chart.svg.attr('class', opts.styleClass);\n\n  chart.container = chart.svg.append('g')\n    .attr('id', 'container')\n    .attr('transform', `translate(${chart.margin.left}, ${chart.margin.top})`);\n\n  return chart;\n}\n\nexport function fitChart(chart, padding) {\n  // calculate real dimensions of a chart (assumes chart is a g-element wrapped inside an svg)\n  d3.select(chart.node().parentElement)\n      .attr('width', chart.node().getBBox().width + padding.left + padding.right)\n      .attr('height', chart.node().getBBox().height + padding.top + padding.bottom);\n}\n\nexport function getRealDepth(d) {\n  // calculates the real depth of a FORM by subtracting unmarked and open reEntry FORMs\n  const ghosts = d.ancestors()\n      .filter(e => (e.data.type === 'form' && e.data.unmarked || \n                e.data.type === 'reEntry' && e.data.lastOpen)).length;\n  return d.depth - ghosts;\n}\n\nexport function textSubscript(text) {\n  // selection module to split text into parts for subscripts (e.g. \"x_n\")\n  return (selection) => {\n    selection.each(function(d) {\n\n        const split = text(d).split('_');\n        if (split.length === 2) {\n\n          d3.select(this).append('tspan')\n            .text(d => split[0]);\n\n          d3.select(this).append('tspan')\n            .text(d => split[1])\n            .attr('dx', 1)\n            .attr('dy', 6)\n            .attr('font-size', '.8em');\n        }\n        else {\n          d3.select(this)\n            .text(text(d));\n        }\n\n    })\n  };\n}\n\nexport function textSize(text, fontSize='inherit', fontFamily='inherit', fontStyle='normal') {\n  /* Source: https://gist.github.com/huytd/327e453c95ca3edadb32d0c867e2561b \n  Credits to: Huy Tr. */\n  if (!d3) return;\n  var container = d3.select('body').append('svg');\n  container.append('text').style('font',`${fontStyle} ${fontSize} ${fontFamily}`)\n      .attr('x','-9999').attr('y','-9999').text(text);\n  var size = container.node().getBBox();\n  container.remove();\n  return { width: size.width, height: size.height };\n}\n\nexport function opacity(color, alpha) {\n  const colorCopy = d3.color(color);\ncolorCopy.opacity = alpha;\nreturn colorCopy;\n}\n\nexport function reduceRemainder(num, _den) {\n  let count = 0;\n  let sign = 1;\n  let den = Math.round(_den);\n  let candidate = den;\n  while (num % den > 0.3) {\n      candidate += sign * 0.001;\n      if (num%candidate < num%den) den = candidate;\n\n      if(count >= 5000) {\n          candidate = Math.round(_den);\n          sign = -1;\n      }\n      if(count >= 10000) break;\n      count++;\n  }\n  // console.log(num%den);\n  return den;\n}\nexport function calcCircleDash(r, unit, fraction) {\n  const circ = Math.PI*2 * r;\n  return reduceRemainder(circ, unit) * fraction;\n}\nexport function circleDashArray(r, unit, fractions) {\n  let str = '';\n  for (let i in fractions) {\n      str = str.concat(`${ calcCircleDash(r, unit, fractions[i]) }px `);\n  }\n  return str;\n}\n\n// export function dashArray(r, unit, fractions) {\n//   let str = '';\n//   for (let i in fractions) {\n//       str = str.concat(`${ calcCircleDash(r, unit, fractions[i]) }px `);\n//   }\n//   return str;\n// }\n\nexport function circleLabel(text, fontSize='inherit', fontFamily='inherit') {\n  // selection module to split text into parts for subscripts (e.g. \"x_n\")\n  return (selection) => {\n\n      selection.each(function(d) {\n\n          const textSz = textSize(text(d), fontSize, fontFamily);\n          const margin = 50;\n\n          d3.select(this).append('text')\n              .style('font', `normal ${fontSize} ${fontFamily}`)\n              .style('text-anchor', 'middle')\n              .raise()\n              .text(d => text(d));\n\n          d3.select(this).filter(d => d.r*2 >= textSz.width + margin).select('text')\n              .classed('label inside', true)\n              .attr('y', d => d.r - textSz.height*0.5 )\n              .attr('dominant-baseline','baseline');\n\n          d3.select(this).filter(d => d.r*2 < textSz.width + margin).select('text')\n              .classed('label outside', true)\n              .attr('y', d => d.r + 4)\n              .attr('dominant-baseline','hanging');\n\n      });\n  };\n}","import * as d3 from 'd3';\nimport { getRealDepth, opacity, circleDashArray } from '../../common/d3-helper';\n\n/* Cascading D3-Styles - by Peter Hofmann, 12/2018 */\n\n// -----------------------\n// global styles\n\nconst global = {\n    common: {\n        font: { family: 'sans-serif', \n                size: '14px',\n            },\n        fontContext: { family: 'sans-serif',\n                        size:  '9px',\n        },\n        color: {base: d3.color('black'),\n                ground: d3.color('white'),\n                indef: d3.color('red'),\n                light: d3.color('#ddd'),\n            },\n        dashes: {\n            },\n    }\n};\nglobal.basic = {\n    ...global.common,\n    font: { ...global.common.font,\n            family: 'georgia, serif', \n        },\n};\nglobal.gestalt = {\n    ...global.common,\n    font: { ...global.common.font,\n            family: 'sans-serif', \n    },\n    color: {...global.common.color,\n            pos: d3.color('white'), \n            neg: d3.color('black')\n        },\n};\nconst [basic, gestalt] = [global.basic, global.gestalt];\n\nexport function clearDefaults(svg) {\n    svg.attr('stroke','none').attr('fill','none');\n}\n\n// -----------------------\n// d3.tree styles:\n\nexport const tree = {\n    common: {\n        nodeSize: {w: 10.0, h: 10.0}, // size of nodes\n        nodeSeparation: {hz: 20, vt: 40}, // separation between nodes\n        dashes: {link: '4px 6px'\n            },\n    }\n};\n\ntree.basic = {\n    ...basic,\n    ...tree.common,\n};\ntree.basic.applyAxisStyles = function(axis) {\n\n    axis.selectAll('.tick').select('line')\n        .style('stroke-width', this.nodeSize.w*1.5)\n        .style('stroke', '#f4f4f4')\n    axis.selectAll('.tick').select('text')\n        // .attr('x', -2)\n        .attr('text-anchor', 'start');\n\n}\ntree.basic.applyNodeStyles = function(nodes, nodePartitions) {\n    const [leaves, sets, forms, reEntries, reChilds, rePoints, elements, vars, consts, unclear] = nodePartitions;\n\n    forms.selectAll('circle')\n        .style('stroke', this.color.base.toString())\n        .style('fill', this.color.ground.toString());\n\n\n    elements.selectAll('circle')\n        .style('fill', this.color.base.toString());\n\n    reEntries.selectAll('circle')\n        .style('stroke', this.color.indef.toString())\n        .style('fill', this.color.indef.toString())\n        .filter(d => d.data.lastOpen)\n            .style('fill', this.color.ground.toString());\n    reChilds.selectAll('circle')\n        .style('stroke', this.color.indef.toString())\n        .style('stroke-dasharray', d => circleDashArray(d.r, 3, [1]));\n    rePoints.selectAll('circle')\n        .style('fill', this.color.indef.toString());\n\n    nodes.selectAll('text')\n        .style('font', `normal ${this.font.size} ${this.font.family}`)\n        .style('dominant-baseline','middle')\n        .style('fill', this.color.base.toString())\n\n    sets.selectAll('circle.inner')\n        // .classed('inner')\n        .style('stroke', 'none')\n        .style('fill', this.color.base.toString());\n\n};\ntree.basic.applyLinkStyles = function(links, linkPartitions) {\n    const [reChildLink, rePointLink] = linkPartitions;\n\n    links.selectAll('path')\n        .style('stroke', this.color.base.toString());\n\n    reChildLink.selectAll('path')\n        .style('stroke', this.color.indef.toString())\n        .style('stroke-dasharray', this.dashes.link);\n\n    rePointLink.selectAll('path')\n        .style('stroke', this.color.indef.toString())\n        .style('stroke-dasharray', this.dashes.link);\n};\n\ntree.gestalt = {\n    ...gestalt,\n    ...tree.common,\n};\ntree.gestalt.applyAxisStyles = function(axis) {\n    tree.basic.applyAxisStyles(axis);\n}\ntree.gestalt.applyNodeStyles = function(nodes, nodePartitions) {\n    const [leaves, sets, forms, reEntries, reChilds, rePoints, elements, vars, consts, unclear] = nodePartitions;\n\n    tree.basic.applyNodeStyles(nodes, nodePartitions);\n};\ntree.gestalt.applyLinkStyles = function(links, linkPartitions) {\n    // const [reChildLink] = linkPartitions;\n\n    tree.basic.applyLinkStyles(links, linkPartitions);\n};\n\n// -----------------------\n// d3.pack styles:\n\nexport const pack = {\n    common: {\n        radius: 14, // 15\n        padding: 14, // 12\n    }\n};\n\npack.basic = {\n    ...basic,\n    ...pack.common,\n};\npack.basic.applyNodeStyles = function(nodes, nodePartitions) {\n    const [leaves, sets, forms, reEntries, reChilds, rePoints, elements, vars, consts, unclear] = nodePartitions;\n\n    forms.select('circle')\n        .style('stroke', this.color.base.toString())\n        .filter(d => d.data.unmarked)\n            .style('stroke','none');\n    reEntries.select('circle')\n        .style('stroke', this.color.indef.toString())\n        .filter(d => d.data.lastOpen)\n            .style('stroke-dasharray', d => circleDashArray(d.r, 14, [2/5, 3/5]) );\n                // `${ calcCircleDash(d.r, 14, 2/5) }px\n                //  ${ calcCircleDash(d.r, 14, 3/5) }px`); // this.dashes.wide\n            // .style('stroke','none');\n\n    elements.selectAll('text')\n        .style('font', `normal ${this.font.size} ${this.font.family}`)\n        .style('dominant-baseline','middle')\n        .style('text-anchor', 'middle')\n        .style('fill', this.color.base.toString());\n\n    unclear.select('rect')\n        .style('fill', this.color.light.toString());\n\n    rePoints.select('circle')\n        .style('fill', this.color.indef.toString())\n        .style('stroke','none');\n\n    const reEvenLabels = reEntries.select('.label')\n        .style('stroke', 'none')\n        .style('fill', this.color.indef.toString());\n};\n\npack.gestalt = {\n    ...gestalt,\n    ...pack.common,\n};\npack.gestalt.invertFill = function(d) {\n    return getRealDepth(d)%2 ? this.color.pos.toString() : this.color.neg.toString();\n};\npack.gestalt.applyNodeStyles = function(nodes, nodePartitions, chart) {\n    const [leaves, sets, forms, reEntries, reChilds, rePoints, elements, vars, consts, unclear] = nodePartitions;\n\n    const defs = d3.select(chart.node().parentNode)\n        .append('defs');\n    const grad_1 = defs.append('radialGradient').attr('id', 'grad-indef-outin')\n        .attr('fx','20%')\n        // .attr('r','55%');\n        // grad_1.append('stop')\n        //     .attr('offset','60%').attr('stop-color', this.color.pos.toString() );\n        // grad_1.append('stop')\n        //     .attr('offset','100%').attr('stop-color', this.color.indef.toString() ); // <- new\n        grad_1.append('stop')\n            .attr('offset','40%').attr('stop-color', opacity(this.color.indef, 0.3).toString() );\n            grad_1.append('stop')\n            .attr('offset','90%').attr('stop-color', opacity(this.color.indef, 0.8).toString() );\n        grad_1.append('stop')\n            .attr('offset','100%').attr('stop-color', opacity(this.color.indef, 1.0).toString() );\n    const grad_2 = defs.append('radialGradient').attr('id', 'grad-indef-inout')\n        // .attr('spreadMethod','reflect')\n        .attr('fx','20%')\n        // .attr('r','55%');\n        grad_2.append('stop')\n            .attr('offset','10%').attr('stop-color', opacity(this.color.indef, 1.0).toString() );\n        grad_2.append('stop')\n            .attr('offset','50%').attr('stop-color', opacity(this.color.indef, 0.6).toString() );\n        grad_2.append('stop')\n            .attr('offset','60%').attr('stop-color', opacity(this.color.indef, 0.4).toString() );\n        grad_2.append('stop')\n            .attr('offset','100%').attr('stop-color', opacity(this.color.indef, 0.0).toString() );\n\n    forms.select('circle').filter(d => !d.data.unmarked)\n        .style('stroke', 'none')\n        .style('fill', d => this.invertFill(d));\n\n    reEntries.select('circle')\n        .style('stroke', d => (d.parent.data.type === 'reEntry') ? this.color.pos.toString() : 'none' )\n        .style('fill', 'url(#grad-indef-outin)');\n\n    const openReEntries = reEntries.select('circle').filter(d => d.data.lastOpen)\n        .style('fill', 'url(#grad-indef-inout)')\n        .style('stroke-dasharray', d => circleDashArray(d.r, 8, [2/5, 3/5]) );\n\n    openReEntries.filter(d => ((d.parent.data.type !== 'reEntry') ||!getRealDepth(d)%2) ) //  \n            .style('stroke', d => this.color.indef.toString());\n\n    openReEntries.filter(d => (d.parent.data.type === 'reEntry') && !d.parent.data.lastOpen)\n            .style('stroke', d => this.color.pos.toString());\n\n            // .style('fill', d => {\n            //     // if(d.parent.data.type === 'reEntry')\n            //     return getRealDepth(d)%2 ? '#ffdddd' : '#aa0000';\n            // });\n\n    elements.selectAll('text')\n        .style('font', `normal ${this.font.size} ${this.font.family}`)\n        .style('dominant-baseline','middle')\n        .style('text-anchor', 'middle')\n        .style('stroke', 'none')\n        .style('fill', d => this.invertFill(d));\n\n    unclear.select('rect')\n        .style('fill',this.color.light.toString());\n    unclear.select('text')\n        .style('fill',this.color.base.toString());\n        \n    rePoints.select('circle')\n        .style('fill',this.color.indef.toString())\n        .style('stroke','none')\n        .filter(d => d.parent.data.type === 'reEntry')\n            .style('stroke', this.color.indef.toString())\n            .style('fill', this.color.pos.toString())\n            .attr('transform', 'scale(1.5)');\n    // elements.filter(d => (type === 'var' || type === 'const' || type === 'unclear') )\n\n    const reEvenLabels = reEntries.select('.label')\n        .style('stroke', 'none')\n        .style('fill', d => (d.parent.data.type === 'reEntry' && !d.parent.data.lastOpen) ? this.color.pos.toString() : this.color.indef.toString());\n    reEntries.select('.label.inside')\n        .style('fill', d => (d.parent.data.type !== 'reEntry' && d.data.lastOpen) ? this.color.indef.toString() : this.color.pos.toString());\n\n};\n\n","import * as d3 from 'd3';\n\nimport { saveSvg, pad } from '../../common/helper';\nimport chartFactory, { fitChart, textSize, textSubscript, circleLabel } from '../../common/d3-helper';\n\nimport './d3-styles.scss';\nimport * as styles from './d3-styles.js';\n\n\nfunction resolveNodes(root, nodes) {\n    // resolves descendant nodes into filtered selections\n    const leaves = nodes.filter(d => root.leaves().filter(l => l === d).pop() )\n        .classed('leaf', true);\n\n    const sets = nodes.filter(d => d.data.type === 'form' ||d.data.type === 'reEntry')\n        .classed('form', true)\n    const forms = sets.filter(d => d.data.type === 'form')\n        .classed('form', true);\n    const reEntries = sets.filter(d => d.data.type === 'reEntry')\n        .classed('reEntry', true);\n\n    const elements = nodes.filter(d => !(d.data.type === 'form' ||d.data.type === 'reEntry'))\n        .classed('element', true);\n    const vars = elements.filter(d => d.data.type === 'var')\n        .classed('var', true);\n    let consts = elements.filter(d => d.data.type === 'const')\n        .classed('const', true);\n    consts.unmarked = elements.filter(d => d.data.value == 0).classed('unmarked', true);\n    consts.marked = elements.filter(d => d.data.value == 1).classed('marked', true);\n    consts.indef = elements.filter(d => d.data.value == 2).classed('indef', true);\n    consts.imag = elements.filter(d => d.data.value == 3).classed('imag', true);\n\n    const unclear = elements.filter(d => d.data.type === 'unclear')\n        .classed('unclear', true);\n\n    const reChilds = forms.filter(d => d.data.reChild)\n        .classed('reChild', true);\n\n    const rePoints = elements.filter(d => d.data.type === 'reEntryPoint')\n        .classed('reEntryPoint', true);\n\n    return [leaves, sets, forms, reEntries, reChilds, rePoints, elements, vars, consts, unclear];\n}\n\nfunction resolveLinks(root, links) {\n    // resolves links between descendant nodes into filtered selections\n    const reChildLink = links.filter(d => d.target.data.reChild)\n        .classed('reChildLink', true);\n\n    const rePointLink = links.filter(d => d.target.data.type === 'reEntryPoint')\n        .classed('rePointLink', true);\n\n    return [reChildLink, rePointLink];\n}\n\nexport default class D3Graph {\n\n    constructor(graphType, data, opts, ...args) {\n        // create basic svg-structure from chartFactory and merge options with configuration\n        const proto = chartFactory( { \n            ...{ margin: { left: 50, right: 50, top: 50, bottom: 50 }, \n                padding: { left: 10, right: 10, top: 10, bottom: 10 },\n                styleClass: 'gestalt' },\n            ...opts\n        } );\n\n        // merge this graph with the chart structure\n        Object.assign(this, proto);\n        // calculate inner dimensions of the svg-chart\n        this.innerHeight = this.height - this.margin.top - this.margin.bottom - this.padding.top - this.padding.bottom;\n        this.innerWidth = this.width - this.margin.left - this.margin.right - this.padding.left - this.padding.right;\n\n        // call the appropriate method to build the graph\n        this.constructor[graphType].call(this, data, ...args);\n        //   this[graphType](data);\n        //   this[graphType].call(this, data, ...args);\n    }\n// (()())((()))((()))\n// (((c)(a)b))()()\n    static tree(data) {\n        const chart = this.container;\n        // create a d3-hierarchy from our form-json\n        const root = d3.hierarchy(data, d => d.space);\n\n        // set up design variables\n        const design = styles.tree[this.styleClass];\n        const [nodeSize, nodeSep] = [design.nodeSize, design.nodeSeparation];\n        const [fontSize, font] = [design.font.size, design.font.family];\n\n        root.dx = nodeSize.w + nodeSep.hz;\n        root.dy = this.width / (root.height + 1);\n\n        // define tree layout\n        const layout = d3.tree()\n            // .size([ this.innerWidth, // - this.padding.left , \n            //         this.innerHeight //- this.padding.top\n            //       ]);\n            .nodeSize([\n                root.dx,\n                root.dy\n            ]) // ([nodeSize.w + nodeSep.hz, nodeSize.h + nodeSep.vt])\n            .separation((a,b) => {\n                return a.parent == b.parent ? 1 : 2;\n            });\n        const tree = layout(root);\n\n        // compute min/max x-values\n        let x0 = Infinity;\n        let x1 = -x0;\n        tree.each(d => {\n            if (d.x > x1) x1 = d.x;\n            if (d.x < x0) x0 = d.x;\n        });\n        // compute new height based on the difference of min/max x-values of tree nodes + twice the padding\n        const rootUnmarked = root.data.unmarked;\n        const axisHeight = 30;\n        this.height = x1 - x0 + this.padding.top*2 + axisHeight;\n\n        // setup svg container\n        this.svg\n            .attr('width', this.width)\n            .attr('height', this.height); // + root.dx*2)\n            // .style('width', '100%')\n            // .style('height', 'auto');\n        styles.clearDefaults(this.svg); // clear default styles for svg export\n\n        // setup basic chart structure\n        chart\n            .classed('graph-tree', true)\n                .attr('transform', `translate(${this.padding.left + (root.data.unmarked ? -root.dy : 0)},${this.padding.top - x0})`);\n                // .attr('transform', `translate(${(root.data.unmarked ? -root.dy : 0)},${0})`);\n                // .attr('transform', () => {\n                //     if (root.data.unmarked) return `translate(${-root.dy},${0})`\n                // }); \n                // root.dy / 3\n                // .attr('transform', `translate(${0},${0})`);\n            // .attr('transform', `translate(${this.innerWidth/2},${0})`);\n            // .attr('transform', `translate(${this.padding.left},${this.padding.top})`);\n        \n        // add vertical axis lines for depth\n\n        const rootHeights = d3.range(root.height + (rootUnmarked ? 0:1));\n\n        this.depthScale = d3.scaleOrdinal()\n            .domain( rootHeights )\n            .range( rootHeights.map(i => (i+(rootUnmarked ? 1:0))*root.dy) );\n        \n        const depthAxis = d3.axisBottom()\n            .scale(this.depthScale)\n            .tickSizeInner(-this.height)\n            .tickSizeOuter(0)\n            .tickPadding(8)\n            .tickValues( this.depthScale.domain().map(i => \n                (this.depthScale.domain().length < 15) ? 'Depth '+i : i\n            ) );\n\n        const axis = chart.append('g')\n            .classed('depthAxis', true)\n            .attr('transform', `translate(0, ${x1 + this.padding.bottom})`)\n            .call(depthAxis);\n        axis.select('.domain').remove();\n        \n\n        // add groups for links and nodes\n\n        const links = chart.selectAll('.link')\n            .data(tree.links()) // tree.descendants().slice(1))\n            .enter().append('g')\n                .classed('link', true)\n\n        const nodes = chart.selectAll('.node')\n            .data(tree.descendants())\n            .enter().append('g')\n                .classed('node', true)\n                .attr('transform', d => `translate(${d.y},${d.x})`);\n\n        if (rootUnmarked) {\n            links.filter(d => d.source.depth === 0)\n                .remove();\n\n            nodes.filter(d => d.depth === 0)\n                .remove();\n        }\n\n        // generate link partition selections\n        const linkPartitions = resolveLinks(tree, links);\n        const [reChildLink, rePointLink] = linkPartitions;\n\n        // generate node partition selections\n        const nodePartitions = resolveNodes(tree, nodes);\n        const [leaves, sets, forms, reEntries, reChilds, rePoints, elements, vars, consts, unclear] = nodePartitions;\n\n        // curved line generator\n        const line = d3.line().curve(d3.curveBasis);\n\n        links\n            .append('path')\n                .attr('d', d3.linkHorizontal()\n                    .x(d => d.y)\n                    .y(d => d.x));\n            // .attr('d', d => line([\n            //     [d.target.x, d.target.y],\n            //     [d.target.x, (d.target.y + d.source.y) / 2],\n            //     [d.source.x, (d.target.y + d.source.y) / 2],\n            //     [d.source.x, d.source.y]],\n            //     ));\n\n        // nodes.filter(d => !d.data.unmarked)\n        //     // .filter(d => d.data.reChild)\n        nodes.filter(d => !d.data.unmarked)\n            .append('circle')\n            .attr('r', nodeSize.w/2)\n            // .attr('cx', d => d.x)\n            // .attr('cy', d => d.y);\n        // rePoints.selectAll('circle')\n        rePoints.append('text')\n            .attr('x', nodeSize.w/2 + 2)\n            .text(d => {\n                let p = d.parent;\n                let counter = 0;\n                while(p.data.type !== 'reEntry') {\n                    p = p.parent;\n                    if (counter > 1000) return null; // security\n                    counter++;\n                }\n                // const reEven = p.data.reEven ? 'even' : 'odd';\n                // return `${reEven} re-entry `;\n                return p.data.reEven ? '2|r|' : '2|r|+1';\n            });\n            // .attr('r', design.radiusSml);\n\n        elements.selectAll('circle')\n            .attr('r', (nodeSize.w/2)/2);\n\n        nodes\n            .append('text')\n            .attr('x', nodeSize.w/2 + 2)\n            // .attr('y', 5)\n        \n        vars.selectAll('text')\n            .call(textSubscript(d => d.data.symbol));\n            //.text(d => `${d.data.symbol}`);\n        consts.selectAll('text')\n            .text(d => `= ${d.data.value}`);\n        unclear.selectAll('text')\n            .text(d => `/${d.data.symbol}/`);\n\n        sets.filter(d => d.children)\n            .append('circle')\n            .classed('inner',true)\n            .attr('r', (nodeSize.w/2)/2);\n\n\n        // apply all style-related attributes to the selections\n        design.applyAxisStyles(axis);\n        design.applyLinkStyles(links, linkPartitions);\n        design.applyNodeStyles(nodes, nodePartitions);\n\n        // fitChart(chart, this.padding);\n\n        // chart.attr('transform', `translate(${chart.node().getBBox().width/2},${0})`);\n\n        // debugging:\n        [this.root, this.layout, this.chart, this.tree, this.design] = \n            [root, layout, chart, tree, design];\n    }\n\n    static pack(data) {\n        const chart = this.container;\n        // create a d3-hierarchy from our form-json\n        // data.forEach()\n        styles.clearDefaults(this.svg); // clear default styles for svg export\n\n        const root = d3.hierarchy(data, d => d.space)\n            .sum(d => d.children ? 0 : 1);\n\n        // set up design variables\n        const design = styles.pack[this.styleClass];\n        const [radius, padding] = [design.radius, design.padding];\n        const [fontSize, font] = [design.font.size, design.font.family];\n\n        // define pack layout\n        const layout = d3.pack()\n        .padding(d => {\n            let pad = padding;\n            if (d.data.type === 'form' && d.children.length === 1) {\n                if (d.children[0].data.type === 'form')\n                    pad = pad * 0.4;\n            }\n            if (d.data.unmarked && d.children.length === 1) pad = 0;\n            return pad;\n        })\n        .radius(d => {\n            let rad = radius;\n            if(typeof(d.data.symbol) === 'string') {\n                rad = textSize(d.data.symbol, fontSize, font).width /2;\n                if(d.data.type === 'unclear') rad += padding*2;\n            }\n            else if(d.data.value) {\n                rad = textSize(d.data.value+'', fontSize, font).width /2;\n            }\n            else if(d.data.children || d.data.type === 'reEntryPoint') rad = 0;\n            return rad;\n        });\n        // .size([ this.innerWidth, this.innerHeight ]);\n        const pack = layout(root);\n\n        // d3.select(chart.node().parentElement)\n        //     .attr('width', pack.r*2 + this.padding.left)\n        //     .attr('height', pack.r*2 + this.padding.top);\n\n\n        // setup basic chart structure\n        chart.attr('class', 'graph-pack')\n            .attr('transform', `translate(${pack.r + this.padding.left},${pack.r + this.padding.top})`);\n\n        const nodes = chart.selectAll('.node')\n            .data(pack.descendants())\n            .enter().append('g')\n                .classed('node', true)\n                .attr('transform', d => `translate(${d.x},${d.y})`);\n\n        // generate node partition selections\n        const nodePartitions = resolveNodes(pack, nodes);\n        const [leaves, sets, forms, reEntries, reChilds, rePoints, elements, vars, consts, unclear] = nodePartitions;\n\n        // define detailled structure/logic\n\n        sets.append('circle')\n            .attr('r', d => d.r);\n        // forms //.filter(d => !d.data.unmarked)\n        //     // .filter(d => d.data.reChild)\n        // reEntries //.filter(d => !d.data.lastOpen)\n        vars.append('text')\n            .call(textSubscript(d => d.data.symbol));\n\n        consts.append('text')\n            .text(d => d.data.value);\n\n        unclear.append('rect')\n            .attr('transform', d => \n            `skewX(-30) translate(${-(d.r - padding)},\n            ${-(textSize('x',fontSize, font).height + padding*2)/2})`)\n            .attr('width', d => d.r*2 - padding*2)\n            .attr('height', d => (textSize('x',fontSize, font).height + padding*2))\n        unclear.append('text')\n            .text(d => d.data.symbol);\n\n        rePoints\n            .append('circle')\n            .attr('r', 1.5);\n            // .attr('cx', -5)\n\n        reEntries\n            .call(circleLabel( d => d.data.reEven ? '2|r|' : '2|r|+1', design.fontContext.size, design.fontContext.family ));\n            // .append('text')\n            // .raise()\n            // .text(d => d.data.reEven ? '2|r|' : '2|r|+1');\n\n\n        // apply all style-related attributes to the selections\n        design.applyNodeStyles(nodes, nodePartitions, chart);\n\n        fitChart(chart, this.padding);\n\n        // debugging:\n        [this.root, this.layout, this.chart, this.pack, this.design] = \n            [root, layout, chart, pack, design];\n    }\n\n    static treemap(data) {\n\n    }\n\n    static force(data) {\n\n    }\n\n}\n\nexport const save = function(format, svg, name) {\n    // exports graphs into svg\n    \n    name = name ||d3.select(svg.parentNode).attr('id');\n    const date = new Date();\n    let timestamp = (''\n    + date.getUTCFullYear()).substr(2) \n    + (pad((date.getUTCMonth()+1),2)) \n    + (pad(date.getUTCDate(),2)) + '-'\n    + (pad((date.getHours()),2))\n    + (pad((date.getMinutes()),2))\n    + (pad((date.getSeconds()),2));\n\n\ttry {\n    switch(format) {\n      case 'svg':\n        saveSvg(svg, timestamp+'_'+name+'.svg');\n        break;\n    }\n\t} catch(e) {\n\t\tconsole.log(e);\n\t}\n}\n// export default graph;","import FForm from './fform';\nimport D3Graph, { save } from '../modules/d3-graph';\n\nlet g1 = {}; let g2 = {};\n\nexport default class FGraph extends FForm {\n  /*\n  =======================================================\n        FORM GRAPH alpha 0.1 by Peter Hofmann, 2018\n  =======================================================\n   Extension of FORM FORM for graph representation and\n   manipulation of json FORMs, using the D3.js library\n  */\n\n  constructor() {\n    // this.graphs = [];\n  };\n\n  // ----------------------------------------------------\n  // Extensions of FForm\n  // ----------------------------------------------------\n\n  static jsonString(form) {\n    const expandedForm = this.expand_reEntry(form);\n    return super.jsonString(expandedForm);\n  }\n\n  // static jsonString(form) {\n  //   // if(typeof(_form) === 'string') _form = this.parseLinear(_form);\n\n  //   const expandedForm = this.expand_reEntry(form);\n  //   return JSON.stringify(expandedForm, undefined, 2);\n  // }\n\n  // ----------------------------------------------------\n  // Graph representation\n  // ----------------------------------------------------\n\n  static createGraph(graphType, _form, options) {\n    // expand re-entry structure to be usable for graphs\n    const form = this.expand_reEntry(_form);\n    // initialize the graph\n\n    const graph = new D3Graph(graphType, form, options);\n    graph.formula = _form;\n    // graphs.push( new D3Graph(graphType, form, options) );\n\n    return graph;\n  }\n\n  static saveGraph(format, svg, name) {\n    save(format, svg, name);\n  }\n\n  static constructNested(reForm) {\n    /* Constructs a (real) nested form structure from the .nested array of the original re-entry json */\n    let space = reForm.space = [];\n    reForm.nested.reverse(); // MUST be reversed, because notation: {deepest, ..., shallowest}\n\n    for(let i in reForm.nested) {\n      if (i > 0) {\n        // prepend the reEntry nesting before everything else in the space\n        space.unshift( {type: 'form', reChild: true, space: []} ); // space.push <- order last\n        const nestedForm = space[0]; // space[space.length-1] <- order last\n        \n        if(!reForm.nested[i].unmarked) nestedForm.space.push(reForm.nested[i]);\n        // else nestedForm.space.push(reForm.nested[i]);\n        else nestedForm.space.push(...reForm.nested[i].space); // push(reForm.nested[i]) for grouping\n\n        space = nestedForm.space;\n      }\n      else {\n        if(!reForm.nested[i].unmarked) space.push(reForm.nested[i]);\n        // else space.push(reForm.nested[i]);\n        else space.push(...reForm.nested[i].space); // push(reForm.nested[i]) for grouping\n      }\n    }    \n\n    // we need to add a point of re-entry to the last nested form\n    // first, lets assume this is the form itself\n    let lastNested = reForm;\n    \n    if(reForm.space.length > 0) {\n      // then loop until the last reChild is found and make this our last nested form\n      \n      while (lastNested.space[0].hasOwnProperty('reChild')) {        \n        lastNested = lastNested.space[0];\n        if (lastNested.space.length < 1) break; // prevent errors when nothing is found\n      }\n    }\n    // for open re-entries, we need to add another nesting (see uFORM iFORM for reference)\n    if(reForm.lastOpen) {\n      lastNested.space.unshift( {type: 'form', reChild: true, space: []} );\n      // then add the re-entry point to either space\n      lastNested.space[0].space.unshift( {type: 'reEntryPoint'} );\n    }\n    else lastNested.space.unshift( {type: 'reEntryPoint'} );\n\n    // last, delete the nested structure, we don't need it anymore\n    delete reForm.nested;\n    return reForm;\n  }\n\n  static expand_reEntry(_form) {\n    if(typeof(_form) !== 'string') _form = JSON.stringify(_form);\n    const refForm = this.parseLinear(_form);\n    let targetForm = this.parseLinear(_form);\n\n    this.traverseForm(refForm, function(refBranch) {\n\n      if(refBranch.type === 'reEntry') {\n        \n        this.traverseForm(targetForm, function(targetBranch) {\n\n          if(JSON.stringify(refBranch) === JSON.stringify(targetBranch)) {\n            \n            targetBranch = this.constructNested(targetBranch);\n            return true;\n          }\n        });\n\n      }\n    });\n\n    return targetForm;\n  }\n\n\n}","import FCalc from './core/fcalc';\nimport FForm from './core/fform';\nimport FGraph from './core/fgraph';\n\nexport {FCalc as FCalc};\nexport {FForm as FForm};\nexport {FGraph as FGraph};\n\nexport default FGraph;"],"sourceRoot":""}